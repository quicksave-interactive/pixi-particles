{"version":3,"file":"pixi-particles.es.js","sources":["../src/PropertyNode.ts","../src/ParticleUtils.ts","../src/PropertyList.ts","../src/Particle.ts","../src/PolygonalChain.ts","../src/Emitter.ts","../src/PathParticle.ts","../src/AnimatedParticle.ts","../src/LinkedListContainer.ts"],"sourcesContent":["import { ParticleUtils, EaseSegment, SimpleEase, Color } from './ParticleUtils';\r\nimport { BasicTweenable } from './EmitterConfig';\r\n\r\nexport interface ValueStep<T> {\r\n    value: T;\r\n    time: number;\r\n}\r\n\r\nexport interface ValueList<T> {\r\n    list: ValueStep<T>[];\r\n    isStepped?: boolean;\r\n    ease?: SimpleEase|EaseSegment[];\r\n}\r\n/**\r\n * A single node in a PropertyList.\r\n */\r\nexport class PropertyNode<V>\r\n{\r\n    /**\r\n     * Value for the node.\r\n     */\r\n    public value: V;\r\n    /**\r\n     * Time value for the node. Between 0-1.\r\n     */\r\n    public time: number;\r\n    /**\r\n     * The next node in line.\r\n     */\r\n    public next: PropertyNode<V>;\r\n    /**\r\n     * If this is the first node in the list, controls if the entire list is stepped or not.\r\n     */\r\n    public isStepped: boolean;\r\n    public ease: SimpleEase;\r\n\r\n    /**\r\n     * @param value The value for this node\r\n     * @param time The time for this node, between 0-1\r\n     * @param [ease] Custom ease for this list. Only relevant for the first node.\r\n     */\r\n    constructor(value: V, time: number, ease?: SimpleEase|EaseSegment[])\r\n    {\r\n        this.value = value;\r\n        this.time = time;\r\n        this.next = null;\r\n        this.isStepped = false;\r\n        if (ease)\r\n        {\r\n            this.ease = typeof ease === 'function' ? ease : ParticleUtils.generateEase(ease);\r\n        }\r\n        else\r\n        {\r\n            this.ease = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a list of property values from a data object {list, isStepped} with a list of objects in\r\n     * the form {value, time}. Alternatively, the data object can be in the deprecated form of\r\n     * {start, end}.\r\n     * @param data The data for the list.\r\n     * @param data.list The array of value and time objects.\r\n     * @param data.isStepped If the list is stepped rather than interpolated.\r\n     * @param data.ease Custom ease for this list.\r\n     * @return The first node in the list\r\n     */\r\n    // eslint-disable-next-line max-len\r\n    public static createList<T extends(string|number)>(data: ValueList<T>|BasicTweenable<T>): PropertyNode<T extends string ? Color : T>\r\n    {\r\n        if ('list' in data)\r\n        {\r\n            const array = data.list;\r\n            let node;\r\n            const { value, time } = array[0];\r\n\r\n            // eslint-disable-next-line max-len\r\n            const first = node = new PropertyNode(typeof value === 'string' ? ParticleUtils.hexToRGB(value) : value, time, data.ease);\r\n\r\n            // only set up subsequent nodes if there are a bunch or the 2nd one is different from the first\r\n            if (array.length > 2 || (array.length === 2 && array[1].value !== value))\r\n            {\r\n                for (let i = 1; i < array.length; ++i)\r\n                {\r\n                    const { value, time } = array[i];\r\n\r\n                    node.next = new PropertyNode(typeof value === 'string' ? ParticleUtils.hexToRGB(value) : value, time);\r\n                    node = node.next;\r\n                }\r\n            }\r\n            first.isStepped = !!data.isStepped;\r\n\r\n            return first as PropertyNode<T extends string ? Color : T>;\r\n        }\r\n\r\n        // Handle deprecated version here\r\n        const start = new PropertyNode(typeof data.start === 'string' ? ParticleUtils.hexToRGB(data.start) : data.start, 0);\r\n        // only set up a next value if it is different from the starting value\r\n\r\n        if (data.end !== data.start)\r\n        {\r\n            start.next = new PropertyNode(typeof data.end === 'string' ? ParticleUtils.hexToRGB(data.end) : data.end, 1);\r\n        }\r\n\r\n        return start as PropertyNode<T extends string ? Color : T>;\r\n    }\r\n}\r\n","import { Texture } from '@pixi/core';\r\nimport { Point } from '@pixi/math';\r\nimport { BLEND_MODES } from '@pixi/constants';\r\nimport { PropertyNode, ValueStep } from './PropertyNode';\r\n// get Texture.from(), only supports V5 and V6 with individual packages\r\n/**\r\n * @hidden\r\n */\r\nconst TextureFromString = Texture.from;\r\n\r\nexport function GetTextureFromString(s: string): Texture\r\n{\r\n    return TextureFromString(s);\r\n}\r\n\r\nexport interface Color {\r\n    r: number;\r\n    g: number;\r\n    b: number;\r\n    a?: number;\r\n}\r\n\r\nexport interface EaseSegment {\r\n    cp: number;\r\n    s: number;\r\n    e: number;\r\n}\r\n\r\nexport type SimpleEase = (time: number) => number;\r\n\r\n/**\r\n * Contains helper functions for particles and emitters to use.\r\n */\r\nexport namespace ParticleUtils {\r\n    /**\r\n     * If errors and warnings should be logged within the library.\r\n     */\r\n    export const verbose = false;\r\n\r\n    export const DEG_TO_RADS = Math.PI / 180;\r\n\r\n    /**\r\n     * Rotates a point by a given angle.\r\n     * @param angle The angle to rotate by in degrees\r\n     * @param p The point to rotate around 0,0.\r\n     */\r\n    export function rotatePoint(angle: number, p: Point): void\r\n    {\r\n        if (!angle) return;\r\n        angle *= ParticleUtils.DEG_TO_RADS;\r\n        const s = Math.sin(angle);\r\n        const c = Math.cos(angle);\r\n        const xnew = (p.x * c) - (p.y * s);\r\n        const ynew = (p.x * s) + (p.y * c);\r\n\r\n        p.x = xnew;\r\n        p.y = ynew;\r\n    }\r\n\r\n    /**\r\n     * Combines separate color components (0-255) into a single uint color.\r\n     * @param r The red value of the color\r\n     * @param g The green value of the color\r\n     * @param b The blue value of the color\r\n     * @return The color in the form of 0xRRGGBB\r\n     */\r\n    export function combineRGBComponents(r: number, g: number, b: number/* , a*/): number\r\n    {\r\n        return /* a << 24 |*/ (r << 16) | (g << 8) | b;\r\n    }\r\n\r\n    /**\r\n     * Reduces the point to a length of 1.\r\n     * @param point The point to normalize\r\n     */\r\n    export function normalize(point: Point): void\r\n    {\r\n        const oneOverLen = 1 / ParticleUtils.length(point);\r\n\r\n        point.x *= oneOverLen;\r\n        point.y *= oneOverLen;\r\n    }\r\n\r\n    /**\r\n     * Multiplies the x and y values of this point by a value.\r\n     * @param point The point to scaleBy\r\n     * @param value The value to scale by.\r\n     */\r\n    export function scaleBy(point: Point, value: number): void\r\n    {\r\n        point.x *= value;\r\n        point.y *= value;\r\n    }\r\n\r\n    /**\r\n     * Returns the length (or magnitude) of this point.\r\n     * @param point The point to measure length\r\n     * @return The length of this point.\r\n     */\r\n    export function length(point: Point): number\r\n    {\r\n        return Math.sqrt((point.x * point.x) + (point.y * point.y));\r\n    }\r\n\r\n    /**\r\n     * Converts a hex string from \"#AARRGGBB\", \"#RRGGBB\", \"0xAARRGGBB\", \"0xRRGGBB\",\r\n     * \"AARRGGBB\", or \"RRGGBB\" to an object of ints of 0-255, as\r\n     * {r, g, b, (a)}.\r\n     * @param color The input color string.\r\n     * @param output An object to put the output in. If omitted, a new object is created.\r\n     * @return The object with r, g, and b properties, possibly with an a property.\r\n     */\r\n    export function hexToRGB(color: string, output?: Color): Color\r\n    {\r\n        if (!output)\r\n        {\r\n            output = {} as Color;\r\n        }\r\n        if (color.charAt(0) === '#')\r\n        {\r\n            color = color.substr(1);\r\n        }\r\n        else if (color.indexOf('0x') === 0)\r\n        {\r\n            color = color.substr(2);\r\n        }\r\n        let alpha;\r\n\r\n        if (color.length === 8)\r\n        {\r\n            alpha = color.substr(0, 2);\r\n            color = color.substr(2);\r\n        }\r\n        output.r = parseInt(color.substr(0, 2), 16);// Red\r\n        output.g = parseInt(color.substr(2, 2), 16);// Green\r\n        output.b = parseInt(color.substr(4, 2), 16);// Blue\r\n        if (alpha)\r\n        {\r\n            output.a = parseInt(alpha, 16);\r\n        }\r\n\r\n        return output;\r\n    }\r\n\r\n    /**\r\n     * Generates a custom ease function, based on the GreenSock custom ease, as demonstrated\r\n     * by the related tool at http://www.greensock.com/customease/.\r\n     * @param segments An array of segments, as created by\r\n     * http://www.greensock.com/customease/.\r\n     * @return A function that calculates the percentage of change at\r\n     *                    a given point in time (0-1 inclusive).\r\n     */\r\n    export function generateEase(segments: EaseSegment[]): SimpleEase\r\n    {\r\n        const qty = segments.length;\r\n        const oneOverQty = 1 / qty;\r\n        /*\r\n         * Calculates the percentage of change at a given point in time (0-1 inclusive).\r\n         * @param {Number} time The time of the ease, 0-1 inclusive.\r\n         * @return {Number} The percentage of the change, 0-1 inclusive (unless your\r\n         *                  ease goes outside those bounds).\r\n         */\r\n\r\n        // eslint-disable-next-line func-names\r\n        return function (time: number): number\r\n        {\r\n            const i = (qty * time) | 0;// do a quick floor operation\r\n\r\n            const t = (time - (i * oneOverQty)) * qty;\r\n            const s = segments[i] || segments[qty - 1];\r\n\r\n            return (s.s + (t * ((2 * (1 - t) * (s.cp - s.s)) + (t * (s.e - s.s)))));\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Gets a blend mode, ensuring that it is valid.\r\n     * @param name The name of the blend mode to get.\r\n     * @return The blend mode as specified in the PIXI.BLEND_MODES enumeration.\r\n     */\r\n    export function getBlendMode(name: string): number\r\n    {\r\n        if (!name) return BLEND_MODES.NORMAL;\r\n        name = name.toUpperCase();\r\n        while (name.indexOf(' ') >= 0)\r\n        {\r\n            name = name.replace(' ', '_');\r\n        }\r\n\r\n        return (BLEND_MODES as any)[name] || BLEND_MODES.NORMAL;\r\n    }\r\n\r\n    /**\r\n     * Converts a list of {value, time} objects starting at time 0 and ending at time 1 into an evenly\r\n     * spaced stepped list of PropertyNodes for color values. This is primarily to handle conversion of\r\n     * linear gradients to fewer colors, allowing for some optimization for Canvas2d fallbacks.\r\n     * @param list The list of data to convert.\r\n     * @param [numSteps=10] The number of steps to use.\r\n     * @return The blend mode as specified in the PIXI.blendModes enumeration.\r\n     */\r\n    export function createSteppedGradient(list: ValueStep<string>[], numSteps = 10): PropertyNode<Color>\r\n    {\r\n        if (typeof numSteps !== 'number' || numSteps <= 0)\r\n        {\r\n            numSteps = 10;\r\n        }\r\n        const first = new PropertyNode<Color>(ParticleUtils.hexToRGB(list[0].value), list[0].time);\r\n\r\n        first.isStepped = true;\r\n        let currentNode = first;\r\n        let current = list[0];\r\n        let nextIndex = 1;\r\n        let next = list[nextIndex];\r\n\r\n        for (let i = 1; i < numSteps; ++i)\r\n        {\r\n            let lerp = i / numSteps;\r\n            // ensure we are on the right segment, if multiple\r\n\r\n            while (lerp > next.time)\r\n            {\r\n                current = next;\r\n                next = list[++nextIndex];\r\n            }\r\n            // convert the lerp value to the segment range\r\n            lerp = (lerp - current.time) / (next.time - current.time);\r\n            const curVal = ParticleUtils.hexToRGB(current.value);\r\n            const nextVal = ParticleUtils.hexToRGB(next.value);\r\n            const output: Color = {\r\n                r: ((nextVal.r - curVal.r) * lerp) + curVal.r,\r\n                g: ((nextVal.g - curVal.g) * lerp) + curVal.g,\r\n                b: ((nextVal.b - curVal.b) * lerp) + curVal.b,\r\n            };\r\n\r\n            currentNode.next = new PropertyNode(output, i / numSteps);\r\n            currentNode = currentNode.next;\r\n        }\r\n\r\n        // we don't need to have a PropertyNode for time of 1, because in a stepped version at that point\r\n        // the particle has died of old age\r\n        return first;\r\n    }\r\n}\r\n","import { ParticleUtils, SimpleEase, Color } from './ParticleUtils';\r\nimport { PropertyNode } from './PropertyNode';\r\n\r\nfunction intValueSimple(this: PropertyList<number>, lerp: number): number\r\n{\r\n    if (this.ease)\r\n    { lerp = this.ease(lerp); }\r\n\r\n    return ((this.next.value - this.current.value) * lerp) + this.current.value;\r\n}\r\n\r\nfunction intColorSimple(this: PropertyList<Color>, lerp: number): number\r\n{\r\n    if (this.ease)\r\n    { lerp = this.ease(lerp); }\r\n    const curVal = this.current.value; const\r\n        nextVal = this.next.value;\r\n    const r = ((nextVal.r - curVal.r) * lerp) + curVal.r;\r\n    const g = ((nextVal.g - curVal.g) * lerp) + curVal.g;\r\n    const b = ((nextVal.b - curVal.b) * lerp) + curVal.b;\r\n\r\n    return ParticleUtils.combineRGBComponents(r, g, b);\r\n}\r\n\r\nfunction intValueComplex(this: PropertyList<number>, lerp: number): number\r\n{\r\n    if (this.ease)\r\n    { lerp = this.ease(lerp); }\r\n    // make sure we are on the right segment\r\n    while (lerp > this.next.time)\r\n    {\r\n        this.current = this.next;\r\n        this.next = this.next.next;\r\n    }\r\n    // convert the lerp value to the segment range\r\n    lerp = (lerp - this.current.time) / (this.next.time - this.current.time);\r\n\r\n    return ((this.next.value - this.current.value) * lerp) + this.current.value;\r\n}\r\n\r\nfunction intColorComplex(this: PropertyList<Color>, lerp: number): number\r\n{\r\n    if (this.ease)\r\n    { lerp = this.ease(lerp); }\r\n    // make sure we are on the right segment\r\n    while (lerp > this.next.time)\r\n    {\r\n        this.current = this.next;\r\n        this.next = this.next.next;\r\n    }\r\n    // convert the lerp value to the segment range\r\n    lerp = (lerp - this.current.time) / (this.next.time - this.current.time);\r\n    const curVal = this.current.value; const\r\n        nextVal = this.next.value;\r\n    const r = ((nextVal.r - curVal.r) * lerp) + curVal.r;\r\n    const g = ((nextVal.g - curVal.g) * lerp) + curVal.g;\r\n    const b = ((nextVal.b - curVal.b) * lerp) + curVal.b;\r\n\r\n    return ParticleUtils.combineRGBComponents(r, g, b);\r\n}\r\n\r\nfunction intValueStepped(this: PropertyList<number>, lerp: number): number\r\n{\r\n    if (this.ease)\r\n    { lerp = this.ease(lerp); }\r\n    // make sure we are on the right segment\r\n    while (this.next && lerp > this.next.time)\r\n    {\r\n        this.current = this.next;\r\n        this.next = this.next.next;\r\n    }\r\n\r\n    return this.current.value;\r\n}\r\n\r\nfunction intColorStepped(this: PropertyList<Color>, lerp: number): number\r\n{\r\n    if (this.ease)\r\n    { lerp = this.ease(lerp); }\r\n    // make sure we are on the right segment\r\n    while (this.next && lerp > this.next.time)\r\n    {\r\n        this.current = this.next;\r\n        this.next = this.next.next;\r\n    }\r\n    const curVal = this.current.value;\r\n\r\n    return ParticleUtils.combineRGBComponents(curVal.r, curVal.g, curVal.b);\r\n}\r\n\r\n/**\r\n * Singly linked list container for keeping track of interpolated properties for particles.\r\n * Each Particle will have one of these for each interpolated property.\r\n */\r\nexport class PropertyList<V>\r\n{\r\n    /**\r\n     * The current property node in the linked list.\r\n     */\r\n    public current: PropertyNode<V>;\r\n    /**\r\n     * The next property node in the linked list. Stored separately for slightly less variable\r\n     * access.\r\n     */\r\n    public next: PropertyNode<V>;\r\n    /**\r\n     * Calculates the correct value for the current interpolation value. This method is set in\r\n     * the reset() method.\r\n     * @param lerp The interpolation value from 0-1.\r\n     * @return The interpolated value. Colors are converted to the hex value.\r\n     */\r\n    public interpolate: (lerp: number) => number;\r\n    /**\r\n     * A custom easing method for this list.\r\n     * @param lerp The interpolation value from 0-1.\r\n     * @return The eased value, also from 0-1.\r\n     */\r\n    public ease: SimpleEase;\r\n    /**\r\n     * If this list manages colors, which requires a different method for interpolation.\r\n     */\r\n    private isColor: boolean;\r\n\r\n    /**\r\n     * @param isColor If this list handles color values\r\n     */\r\n    constructor(isColor = false)\r\n    {\r\n        this.current = null;\r\n        this.next = null;\r\n        this.isColor = !!isColor;\r\n        this.interpolate = null;\r\n        this.ease = null;\r\n    }\r\n\r\n    /**\r\n     * Resets the list for use.\r\n     * @param first The first node in the list.\r\n     * @param first.isStepped If the values should be stepped instead of interpolated linearly.\r\n     */\r\n    public reset(first: PropertyNode<V>): void\r\n    {\r\n        this.current = first;\r\n        this.next = first.next;\r\n        const isSimple = this.next && this.next.time >= 1;\r\n\r\n        if (isSimple)\r\n        {\r\n            this.interpolate = this.isColor ? intColorSimple : intValueSimple;\r\n        }\r\n        else if (first.isStepped)\r\n        {\r\n            this.interpolate = this.isColor ? intColorStepped : intValueStepped;\r\n        }\r\n        else\r\n        {\r\n            this.interpolate = this.isColor ? intColorComplex : intValueComplex;\r\n        }\r\n        this.ease = this.current.ease;\r\n    }\r\n}\r\n","import { Emitter } from './Emitter';\r\nimport { ParticleUtils, SimpleEase, Color, GetTextureFromString } from './ParticleUtils';\r\nimport { PropertyList } from './PropertyList';\r\nimport { LinkedListChild } from './LinkedListContainer';\r\nimport { Texture } from '@pixi/core';\r\nimport { Point } from '@pixi/math';\r\nimport { Sprite } from '@pixi/sprite';\r\n\r\n/**\r\n * An individual particle image. You shouldn't have to deal with these.\r\n */\r\nexport class Particle extends Sprite implements LinkedListChild\r\n{\r\n    /**\r\n     * The emitter that controls this particle.\r\n     */\r\n    public emitter: Emitter;\r\n    /**\r\n     * The velocity of the particle. Speed may change, but the angle also\r\n     * contained in velocity is constant.\r\n     */\r\n    public velocity: Point;\r\n    /**\r\n     * The maximum lifetime of this particle, in seconds.\r\n     */\r\n    public maxLife: number;\r\n    /**\r\n     * The current age of the particle, in seconds.\r\n     */\r\n    public age: number;\r\n    /**\r\n     * A simple easing function to be applied to all properties that\r\n     * are being interpolated.\r\n     */\r\n    public ease: SimpleEase;\r\n    /**\r\n     * Extra data that the emitter passes along for custom particles.\r\n     */\r\n    public extraData: any;\r\n    /**\r\n     * The alpha of the particle throughout its life.\r\n     */\r\n    public alphaList: PropertyList<number>;\r\n    /**\r\n     * The speed of the particle throughout its life.\r\n     */\r\n    public speedList: PropertyList<number>;\r\n    /**\r\n     * A multiplier from 0-1 applied to the speed of the particle at all times.\r\n     */\r\n    public speedMultiplier: number;\r\n    /**\r\n     * Acceleration to apply to the particle.\r\n     */\r\n    public acceleration: Point;\r\n    /**\r\n     * The maximum speed allowed for accelerating particles. Negative values, values of 0 or NaN\r\n     * will disable the maximum speed.\r\n     */\r\n    public maxSpeed: number;\r\n    /**\r\n     * Speed at which the particle rotates, in radians per second.\r\n     */\r\n    public rotationSpeed: number;\r\n\r\n    /**\r\n     * Acceleration of rotation (angular acceleration) to apply to the particle.\r\n     */\r\n    public rotationAcceleration: number;\r\n\r\n    /**\r\n     * If particle rotation is locked, preventing rotation from occurring due\r\n     * to directional changes.\r\n     */\r\n    public noRotation: boolean;\r\n    /**\r\n     * The scale of the particle throughout its life.\r\n     */\r\n    public scaleList: PropertyList<number>;\r\n    /**\r\n     * A multiplier from 0-1 applied to the scale of the particle at all times.\r\n     */\r\n    public scaleMultiplier: number;\r\n    /**\r\n     * The tint of the particle throughout its life.\r\n     */\r\n    public colorList: PropertyList<Color>;\r\n    /**\r\n     * A reference to init, so that subclasses can access it without the penalty of Function.call()\r\n     */\r\n    protected Particle_init: typeof Particle.prototype.init;\r\n    /**\r\n     * A reference to update so that subclasses can access the original without the overhead\r\n     * of Function.call().\r\n     * @param delta Time elapsed since the previous frame, in __seconds__.\r\n     * @return The standard interpolation multiplier (0-1) used for all relevant particle\r\n     *                   properties. A value of -1 means the particle died of old age instead.\r\n     */\r\n    protected Particle_update: typeof Particle.prototype.update;\r\n    protected Particle_destroy: typeof Particle.prototype.destroy;\r\n    protected Sprite_destroy: typeof Sprite.prototype.destroy;\r\n    /**\r\n     * If alpha should be interpolated at all.\r\n     */\r\n    protected _doAlpha: boolean;\r\n    /**\r\n     * If scale should be interpolated at all.\r\n     */\r\n    protected _doScale: boolean;\r\n    /**\r\n     * If speed should be interpolated at all.\r\n     */\r\n    protected _doSpeed: boolean;\r\n    /**\r\n     * If acceleration should be handled at all. _doSpeed is mutually exclusive with this,\r\n     * and _doSpeed gets priority.\r\n     */\r\n    protected _doAcceleration: boolean;\r\n    /**\r\n     * If color should be interpolated at all.\r\n     */\r\n    protected _doColor: boolean;\r\n    /**\r\n     * If normal movement should be handled. Subclasses wishing to override movement\r\n     * can set this to false in init().\r\n     */\r\n    protected _doNormalMovement: boolean;\r\n    /**\r\n     * One divided by the max life of the particle, saved for slightly faster math.\r\n     */\r\n    private _oneOverLife: number;\r\n    /**\r\n     * Reference to the next particle in the list.\r\n     */\r\n    public next: Particle;\r\n\r\n    /**\r\n     * Reference to the previous particle in the list.\r\n     */\r\n    public prev: Particle;\r\n\r\n    public prevChild: LinkedListChild;\r\n    public nextChild: LinkedListChild;\r\n\r\n    /**\r\n     * @param {PIXI.particles.Emitter} emitter The emitter that controls this particle.\r\n     */\r\n    constructor(emitter: Emitter)\r\n    {\r\n        // start off the sprite with a blank texture, since we are going to replace it\r\n        // later when the particle is initialized.\r\n        super();\r\n        // initialize LinkedListChild props so they are included in underlying JS class definition\r\n        this.prevChild = this.nextChild = null;\r\n\r\n        this.emitter = emitter;\r\n        // particles should be centered\r\n        this.anchor.x = this.anchor.y = 0.5;\r\n        this.velocity = new Point();\r\n        this.rotationSpeed = 0;\r\n        this.rotationAcceleration = 0;\r\n        this.maxLife = 0;\r\n        this.age = 0;\r\n        this.ease = null;\r\n        this.extraData = null;\r\n        this.alphaList = new PropertyList();\r\n        this.speedList = new PropertyList();\r\n        this.speedMultiplier = 1;\r\n        this.acceleration = new Point();\r\n        this.maxSpeed = NaN;\r\n        this.scaleList = new PropertyList();\r\n        this.scaleMultiplier = 1;\r\n        this.colorList = new PropertyList(true);\r\n        this._doAlpha = false;\r\n        this._doScale = false;\r\n        this._doSpeed = false;\r\n        this._doAcceleration = false;\r\n        this._doColor = false;\r\n        this._doNormalMovement = false;\r\n        this._oneOverLife = 0;\r\n        this.next = null;\r\n        this.prev = null;\r\n\r\n        // save often used functions on the instance instead of the prototype for better speed\r\n        this.init = this.init;\r\n        this.Particle_init = Particle.prototype.init;\r\n        this.update = this.update;\r\n        this.Particle_update = Particle.prototype.update;\r\n        this.Sprite_destroy = super.destroy;\r\n        this.Particle_destroy = Particle.prototype.destroy;\r\n        this.applyArt = this.applyArt;\r\n        this.kill = this.kill;\r\n    }\r\n\r\n    /**\r\n     * Initializes the particle for use, based on the properties that have to\r\n     * have been set already on the particle.\r\n     */\r\n    public init(): void\r\n    {\r\n        // reset the age\r\n        this.age = 0;\r\n        // set up the velocity based on the start speed and rotation\r\n        this.velocity.x = this.speedList.current.value * this.speedMultiplier;\r\n        this.velocity.y = 0;\r\n        ParticleUtils.rotatePoint(this.rotation, this.velocity);\r\n        if (this.noRotation)\r\n        {\r\n            this.rotation = 0;\r\n        }\r\n        else\r\n        {\r\n            // convert rotation to Radians from Degrees\r\n            this.rotation *= ParticleUtils.DEG_TO_RADS;\r\n        }\r\n        // convert rotation speed to Radians from Degrees\r\n        this.rotationSpeed *= ParticleUtils.DEG_TO_RADS;\r\n        this.rotationAcceleration *= ParticleUtils.DEG_TO_RADS;\r\n\r\n        // set alpha to inital alpha\r\n        this.alpha = this.alphaList.current.value;\r\n        // set scale to initial scale\r\n        this.scale.x = this.scale.y = this.scaleList.current.value;\r\n        // figure out what we need to interpolate\r\n        this._doAlpha = !!this.alphaList.current.next;\r\n        this._doSpeed = !!this.speedList.current.next;\r\n        this._doScale = !!this.scaleList.current.next;\r\n        this._doColor = !!this.colorList.current.next;\r\n        this._doAcceleration = this.acceleration.x !== 0 || this.acceleration.y !== 0;\r\n        // _doNormalMovement can be cancelled by subclasses\r\n        this._doNormalMovement = this._doSpeed || this.speedList.current.value !== 0 || this._doAcceleration;\r\n        // save our lerp helper\r\n        this._oneOverLife = 1 / this.maxLife;\r\n        // set the inital color\r\n        const color = this.colorList.current.value;\r\n\r\n        this.tint = ParticleUtils.combineRGBComponents(color.r, color.g, color.b);\r\n        // ensure visibility\r\n        this.visible = true;\r\n    }\r\n\r\n    /**\r\n     * Sets the texture for the particle. This can be overridden to allow\r\n     * for an animated particle.\r\n     * @param art The texture to set.\r\n     */\r\n    public applyArt(art: any): void\r\n    {\r\n        this.texture = art || Texture.EMPTY;\r\n    }\r\n\r\n    /**\r\n     * Updates the particle.\r\n     * @param delta Time elapsed since the previous frame, in __seconds__.\r\n     * @return The standard interpolation multiplier (0-1) used for all\r\n     *         relevant particle properties. A value of -1 means the particle\r\n     *         died of old age instead.\r\n     */\r\n    public update(delta: number): number\r\n    {\r\n        // increase age\r\n        this.age += delta;\r\n        // recycle particle if it is too old\r\n        if (this.age >= this.maxLife || this.age < 0)\r\n        {\r\n            this.kill();\r\n\r\n            return -1;\r\n        }\r\n\r\n        // determine our interpolation value\r\n        let lerp = this.age * this._oneOverLife;// lifetime / maxLife;\r\n\r\n        if (this.ease)\r\n        {\r\n            if (this.ease.length === 4)\r\n            {\r\n                // the t, b, c, d parameters that some tween libraries use\r\n                // (time, initial value, end value, duration)\r\n                lerp = (this.ease as any)(lerp, 0, 1, 1);\r\n            }\r\n            else\r\n            {\r\n                // the simplified version that we like that takes\r\n                // one parameter, time from 0-1. TweenJS eases provide this usage.\r\n                lerp = this.ease(lerp);\r\n            }\r\n        }\r\n\r\n        // interpolate alpha\r\n        if (this._doAlpha)\r\n        {\r\n            this.alpha = this.alphaList.interpolate(lerp);\r\n        }\r\n        // interpolate scale\r\n        if (this._doScale)\r\n        {\r\n            const scale = this.scaleList.interpolate(lerp) * this.scaleMultiplier;\r\n\r\n            this.scale.x = this.scale.y = scale;\r\n        }\r\n        // handle movement\r\n        if (this._doNormalMovement)\r\n        {\r\n            let deltaX: number;\r\n            let deltaY: number;\r\n            // interpolate speed\r\n\r\n            if (this._doSpeed)\r\n            {\r\n                const speed = this.speedList.interpolate(lerp) * this.speedMultiplier;\r\n\r\n                ParticleUtils.normalize(this.velocity);\r\n                ParticleUtils.scaleBy(this.velocity, speed);\r\n                deltaX = this.velocity.x * delta;\r\n                deltaY = this.velocity.y * delta;\r\n            }\r\n            else if (this._doAcceleration)\r\n            {\r\n                const oldVX = this.velocity.x;\r\n                const oldVY = this.velocity.y;\r\n\r\n                this.velocity.x += this.acceleration.x * delta;\r\n                this.velocity.y += this.acceleration.y * delta;\r\n                if (this.maxSpeed)\r\n                {\r\n                    const currentSpeed = ParticleUtils.length(this.velocity);\r\n                    // if we are going faster than we should, clamp at the max speed\r\n                    // DO NOT recalculate vector length\r\n\r\n                    if (currentSpeed > this.maxSpeed)\r\n                    {\r\n                        ParticleUtils.scaleBy(this.velocity, this.maxSpeed / currentSpeed);\r\n                    }\r\n                }\r\n                // calculate position delta by the midpoint between our old velocity and our new velocity\r\n                deltaX = (oldVX + this.velocity.x) / 2 * delta;\r\n                deltaY = (oldVY + this.velocity.y) / 2 * delta;\r\n            }\r\n            else\r\n            {\r\n                deltaX = this.velocity.x * delta;\r\n                deltaY = this.velocity.y * delta;\r\n            }\r\n            // adjust position based on velocity\r\n            this.position.x += deltaX;\r\n            this.position.y += deltaY;\r\n        }\r\n        // interpolate color\r\n        if (this._doColor)\r\n        {\r\n            this.tint = this.colorList.interpolate(lerp);\r\n        }\r\n        // update rotation\r\n        if (this.rotationAcceleration !== 0)\r\n        {\r\n            const newRotationSpeed = this.rotationSpeed + (this.rotationAcceleration * delta);\r\n\r\n            this.rotation += (this.rotationSpeed + newRotationSpeed) / 2 * delta;\r\n            this.rotationSpeed = newRotationSpeed;\r\n        }\r\n        else if (this.rotationSpeed !== 0)\r\n        {\r\n            this.rotation += this.rotationSpeed * delta;\r\n        }\r\n        else if (this.acceleration && !this.noRotation)\r\n        {\r\n            this.rotation = Math.atan2(this.velocity.y, this.velocity.x);// + Math.PI / 2;\r\n        }\r\n\r\n        return lerp;\r\n    }\r\n\r\n    /**\r\n     * Kills the particle, removing it from the display list\r\n     * and telling the emitter to recycle it.\r\n     */\r\n    public kill(): void\r\n    {\r\n        this.emitter.recycle(this);\r\n    }\r\n\r\n    /**\r\n     * Destroys the particle, removing references and preventing future use.\r\n     */\r\n    public destroy(): void\r\n    {\r\n        if (this.parent)\r\n        {\r\n            this.parent.removeChild(this);\r\n        }\r\n        this.Sprite_destroy();\r\n        this.emitter = this.velocity = this.colorList = this.scaleList = this.alphaList\r\n    = this.speedList = this.ease = this.next = this.prev = null;\r\n    }\r\n\r\n    /**\r\n     * Checks over the art that was passed to the Emitter's init() function, to do any special\r\n     * modifications to prepare it ahead of time.\r\n     * @param art The array of art data. For Particle, it should be an array of\r\n     *            Textures. Any strings in the array will be converted to\r\n     *            Textures via Texture.from().\r\n     * @return The art, after any needed modifications.\r\n     */\r\n    public static parseArt(art: any[]): any[]\r\n    {\r\n        // convert any strings to Textures.\r\n        let i;\r\n\r\n        for (i = art.length; i >= 0; --i)\r\n        {\r\n            if (typeof art[i] === 'string')\r\n            {\r\n                art[i] = GetTextureFromString(art[i]);\r\n            }\r\n        }\r\n        // particles from different base textures will be slower in WebGL than if they\r\n        // were from one spritesheet\r\n        if (ParticleUtils.verbose)\r\n        {\r\n            for (i = art.length - 1; i > 0; --i)\r\n            {\r\n                if (art[i].baseTexture !== art[i - 1].baseTexture)\r\n                {\r\n                    if (window.console)\r\n                    {\r\n                        // eslint-disable-next-line max-len\r\n                        console.warn('PixiParticles: using particle textures from different images may hinder performance in WebGL');\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return art;\r\n    }\r\n\r\n    /**\r\n     * Parses extra emitter data to ensure it is set up for this particle class.\r\n     * Particle does nothing to the extra data.\r\n     * @param extraData The extra data from the particle config.\r\n     * @return The parsed extra data.\r\n     */\r\n    public static parseData(extraData: any): any\r\n    {\r\n        return extraData;\r\n    }\r\n}\r\n","import { Point } from '@pixi/math';\r\n\r\nexport interface BasicPoint\r\n{\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface Segment\r\n{\r\n    p1: BasicPoint;\r\n    p2: BasicPoint;\r\n    l: number;\r\n}\r\n\r\n/**\r\n * Chain of line segments for generating spawn positions.\r\n */\r\nexport class PolygonalChain\r\n{\r\n    /**\r\n     * List of segment objects in the chain.\r\n     */\r\n    private segments: Segment[];\r\n    /**\r\n     * Total length of all segments of the chain.\r\n     */\r\n    private totalLength: number;\r\n    /**\r\n     * Total length of segments up to and including the segment of the same index.\r\n     * Used for weighted random selection of segment.\r\n     */\r\n    private countingLengths: number[];\r\n\r\n    /**\r\n     * @param data Point data for polygon chains. Either a list of points for a single chain, or a list of chains.\r\n     */\r\n    constructor(data: BasicPoint[]|BasicPoint[][])\r\n    {\r\n        this.segments = [];\r\n        this.countingLengths = [];\r\n        this.totalLength = 0;\r\n        this.init(data);\r\n    }\r\n\r\n    /**\r\n     * @param data Point data for polygon chains. Either a list of points for a single chain, or a list of chains.\r\n     */\r\n    private init(data: BasicPoint[]|BasicPoint[][]): void\r\n    {\r\n        // if data is not present, set up a segment of length 0\r\n        if (!data || !data.length)\r\n        {\r\n            this.segments.push({ p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 }, l: 0 });\r\n        }\r\n        else if (Array.isArray(data[0]))\r\n        {\r\n            // list of segment chains, each defined as a list of points\r\n            for (let i = 0; i < data.length; ++i)\r\n            {\r\n                // loop through the chain, connecting points\r\n                const chain = data[i] as BasicPoint[];\r\n                let prevPoint = chain[0] as BasicPoint;\r\n\r\n                for (let j = 1; j < chain.length; ++j)\r\n                {\r\n                    const second = chain[j] as BasicPoint;\r\n\r\n                    this.segments.push({ p1: prevPoint, p2: second, l: 0 });\r\n                    prevPoint = second;\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            let prevPoint = data[0] as BasicPoint;\r\n            // list of points\r\n\r\n            for (let i = 1; i < data.length; ++i)\r\n            {\r\n                const second = data[i] as BasicPoint;\r\n\r\n                this.segments.push({ p1: prevPoint, p2: second, l: 0 });\r\n                prevPoint = second;\r\n            }\r\n        }\r\n        // now go through our segments to calculate the lengths so that we\r\n        // can set up a nice weighted random distribution\r\n        for (let i = 0; i < this.segments.length; ++i)\r\n        {\r\n            const { p1, p2 } = this.segments[i];\r\n            const segLength = Math.sqrt(((p2.x - p1.x) * (p2.x - p1.x)) + ((p2.y - p1.y) * (p2.y - p1.y)));\r\n            // save length so we can turn a random number into a 0-1 interpolation value later\r\n\r\n            this.segments[i].l = segLength;\r\n            this.totalLength += segLength;\r\n            // keep track of the length so far, counting up\r\n            this.countingLengths.push(this.totalLength);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets a random point in the chain.\r\n     * @param out The point to store the selected position in.\r\n     */\r\n    public getRandomPoint(out: Point): void\r\n    {\r\n        // select a random spot in the length of the chain\r\n        const rand = Math.random() * this.totalLength;\r\n        let chosenSeg: Segment;\r\n        let lerp: number;\r\n\r\n        // if only one segment, it wins\r\n        if (this.segments.length === 1)\r\n        {\r\n            chosenSeg = this.segments[0];\r\n            lerp = rand;\r\n        }\r\n        else\r\n        {\r\n            // otherwise, go through countingLengths until we have determined\r\n            // which segment we chose\r\n            for (let i = 0; i < this.countingLengths.length; ++i)\r\n            {\r\n                if (rand < this.countingLengths[i])\r\n                {\r\n                    chosenSeg = this.segments[i];\r\n                    // set lerp equal to the length into that segment\r\n                    // (i.e. the remainder after subtracting all the segments before it)\r\n                    lerp = i === 0 ? rand : rand - this.countingLengths[i - 1];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // divide lerp by the segment length, to result in a 0-1 number.\r\n        lerp /= chosenSeg.l || 1;\r\n        const { p1, p2 } = chosenSeg;\r\n        // now calculate the position in the segment that the lerp value represents\r\n\r\n        out.x = p1.x + (lerp * (p2.x - p1.x));\r\n        out.y = p1.y + (lerp * (p2.y - p1.y));\r\n    }\r\n}\r\n","import { ParticleUtils, Color, SimpleEase } from './ParticleUtils';\r\nimport { Particle } from './Particle';\r\nimport { PropertyNode } from './PropertyNode';\r\nimport { PolygonalChain } from './PolygonalChain';\r\nimport { EmitterConfig, OldEmitterConfig } from './EmitterConfig';\r\nimport { Container } from '@pixi/display';\r\nimport { settings } from '@pixi/settings';\r\nimport { Point, Circle, Rectangle } from '@pixi/math';\r\nimport { Ticker } from '@pixi/ticker';\r\n// get the shared ticker, only supports V5 and V6 with individual packages\r\n/**\r\n * @hidden\r\n */\r\nconst ticker = Ticker.shared;\r\n\r\nexport interface ParticleConstructor\r\n{\r\n    new (emitter: Emitter): Particle;\r\n}\r\n\r\n/**\r\n * @hidden\r\n */\r\nconst helperPoint = new Point();\r\n\r\n/**\r\n * A particle emitter.\r\n */\r\nexport class Emitter\r\n{\r\n    /**\r\n     * The constructor used to create new particles. The default is\r\n     * the built in particle class.\r\n     */\r\n    protected _particleConstructor: typeof Particle;\r\n    // properties for individual particles\r\n    /**\r\n     * An array of PIXI Texture objects.\r\n     */\r\n    public particleImages: any[];\r\n    /**\r\n     * The first node in the list of alpha values for all particles.\r\n     */\r\n    public startAlpha: PropertyNode<number>;\r\n    /**\r\n     * The first node in the list of speed values of all particles.\r\n     */\r\n    public startSpeed: PropertyNode<number>;\r\n    /**\r\n     * A minimum multiplier for the speed of a particle at all stages of its life. A value between\r\n     * minimumSpeedMultiplier and 1 is randomly generated for each particle.\r\n     */\r\n    public minimumSpeedMultiplier: number;\r\n    /**\r\n     * Acceleration to apply to particles. Using this disables\r\n     * any interpolation of particle speed. If the particles do\r\n     * not have a rotation speed, then they will be rotated to\r\n     * match the direction of travel.\r\n     */\r\n    public acceleration: Point;\r\n    /**\r\n     * The maximum speed allowed for accelerating particles. Negative values, values of 0 or NaN\r\n     * will disable the maximum speed.\r\n     */\r\n    public maxSpeed: number;\r\n    /**\r\n     * The first node in the list of scale values of all particles.\r\n     */\r\n    public startScale: PropertyNode<number>;\r\n    /**\r\n     * A minimum multiplier for the scale of a particle at all stages of its life. A value between\r\n     * minimumScaleMultiplier and 1 is randomly generated for each particle.\r\n     */\r\n    public minimumScaleMultiplier: number;\r\n    /**\r\n     * The first node in the list of  color values of all particles, as red, green, and blue\r\n     * uints from 0-255.\r\n     */\r\n    public startColor: PropertyNode<Color>;\r\n    /**\r\n     * The minimum lifetime for a particle, in seconds.\r\n     */\r\n    public minLifetime: number;\r\n    /**\r\n     * The maximum lifetime for a particle, in seconds.\r\n     */\r\n    public maxLifetime: number;\r\n    /**\r\n     * The minimum start rotation for a particle, in degrees. This value\r\n     * is ignored if the spawn type is \"burst\" or \"arc\".\r\n     */\r\n    public minStartRotation: number;\r\n    /**\r\n     * The maximum start rotation for a particle, in degrees. This value\r\n     * is ignored if the spawn type is \"burst\" or \"arc\".\r\n     */\r\n    public maxStartRotation: number;\r\n    /**\r\n     * If no particle rotation should occur. Starting rotation will still\r\n     * affect the direction in which particles move. If the rotation speed\r\n     * is set, then this will be ignored.\r\n     */\r\n    public noRotation: boolean;\r\n    /**\r\n     * The minimum rotation speed for a particle, in degrees per second.\r\n     * This only visually spins the particle, it does not change direction\r\n     * of movement.\r\n     */\r\n    public minRotationSpeed: number;\r\n    /**\r\n     * The maximum rotation speed for a particle, in degrees per second.\r\n     * This only visually spins the particle, it does not change direction\r\n     * of movement.\r\n     */\r\n    public maxRotationSpeed: number;\r\n    /**\r\n    * The Acceleration of rotation (angular acceleration) for a particle, in degrees per second.\r\n    */\r\n    public rotationAcceleration: number;\r\n    /**\r\n     * The blend mode for all particles, as named by PIXI.blendModes.\r\n     */\r\n    public particleBlendMode: number;\r\n    /**\r\n     * An easing function for nonlinear interpolation of values. Accepts a single\r\n     * parameter of time as a value from 0-1, inclusive. Expected outputs are values\r\n     * from 0-1, inclusive.\r\n     */\r\n    public customEase: SimpleEase;\r\n    /**\r\n     *\tExtra data for use in custom particles. The emitter doesn't look inside, but\r\n     *\tpasses it on to the particle to use in init().\r\n     */\r\n    public extraData: any;\r\n    // properties for spawning particles\r\n    /**\r\n     * Time between particle spawns in seconds.\r\n     */\r\n    protected _frequency: number;\r\n    /**\r\n     * Chance that a particle will be spawned on each opportunity to spawn one.\r\n     * 0 is 0%, 1 is 100%.\r\n     */\r\n    public spawnChance: number;\r\n    /**\r\n     * Maximum number of particles to keep alive at a time. If this limit\r\n     * is reached, no more particles will spawn until some have died.\r\n     */\r\n    public maxParticles: number;\r\n    /**\r\n     * The amount of time in seconds to emit for before setting emit to false.\r\n     * A value of -1 is an unlimited amount of time.\r\n     */\r\n    public emitterLifetime: number;\r\n    /**\r\n     * Position at which to spawn particles, relative to the emitter's owner's origin.\r\n     * For example, the flames of a rocket travelling right might have a spawnPos\r\n     * of {x:-50, y:0}.\r\n     * to spawn at the rear of the rocket.\r\n     * To change this, use updateSpawnPos().\r\n     */\r\n    public spawnPos: Point;\r\n    /**\r\n     * How the particles will be spawned. Valid types are \"point\", \"rectangle\",\r\n     * \"circle\", \"burst\", \"ring\".\r\n     */\r\n    public spawnType: string;\r\n    /**\r\n     * A reference to the emitter function specific to the spawn type.\r\n     */\r\n    protected _spawnFunc: (p: Particle, emitPosX: number, emitPosY: number, i?: number) => void;\r\n    /**\r\n     * A rectangle relative to spawnPos to spawn particles inside if the spawn type is \"rect\".\r\n     */\r\n    public spawnRect: Rectangle;\r\n    /**\r\n     * A polygon relative to spawnPos to spawn particles on the chain if the spawn type is \"polygonalChain\".\r\n     */\r\n    public spawnPolygonalChain: PolygonalChain;\r\n    /**\r\n     * A circle relative to spawnPos to spawn particles inside if the spawn type is \"circle\".\r\n     */\r\n    public spawnCircle: Circle & {minRadius: number};\r\n    /**\r\n     * Number of particles to spawn time that the frequency allows for particles to spawn.\r\n     */\r\n    public particlesPerWave: number;\r\n    /**\r\n     * Spacing between particles in a burst. 0 gives a random angle for each particle.\r\n     */\r\n    public particleSpacing: number;\r\n    /**\r\n     * Angle at which to start spawning particles in a burst.\r\n     */\r\n    public angleStart: number;\r\n    /**\r\n     * Rotation of the emitter or emitter's owner in degrees. This is added to\r\n     * the calculated spawn angle.\r\n     * To change this, use rotate().\r\n     */\r\n    protected rotation: number;\r\n    /**\r\n     * The world position of the emitter's owner, to add spawnPos to when\r\n     * spawning particles. To change this, use updateOwnerPos().\r\n     */\r\n    protected ownerPos: Point;\r\n    /**\r\n     * The origin + spawnPos in the previous update, so that the spawn position\r\n     * can be interpolated to space out particles better.\r\n     */\r\n    protected _prevEmitterPos: Point;\r\n    /**\r\n     * If _prevEmitterPos is valid, to prevent interpolation on the first update\r\n     */\r\n    protected _prevPosIsValid: boolean;\r\n    /**\r\n     * If either ownerPos or spawnPos has changed since the previous update.\r\n     */\r\n    protected _posChanged: boolean;\r\n    /**\r\n     * The container to add particles to.\r\n     */\r\n    protected _parent: Container;\r\n    /**\r\n     * If particles should be added at the back of the display list instead of the front.\r\n     */\r\n    public addAtBack: boolean;\r\n    /**\r\n     * The current number of active particles.\r\n     */\r\n    public particleCount: number;\r\n    /**\r\n     * If particles should be emitted during update() calls. Setting this to false\r\n     * stops new particles from being created, but allows existing ones to die out.\r\n     */\r\n    protected _emit: boolean;\r\n    /**\r\n     * The timer for when to spawn particles in seconds, where numbers less\r\n     * than 0 mean that particles should be spawned.\r\n     */\r\n    protected _spawnTimer: number;\r\n    /**\r\n     * The life of the emitter in seconds.\r\n     */\r\n    protected _emitterLife: number;\r\n    /**\r\n     * The particles that are active and on the display list. This is the first particle in a\r\n     * linked list.\r\n     */\r\n    protected _activeParticlesFirst: Particle;\r\n    /**\r\n     * The particles that are active and on the display list. This is the last particle in a\r\n     * linked list.\r\n     */\r\n    protected _activeParticlesLast: Particle;\r\n    /**\r\n     * The particles that are not currently being used. This is the first particle in a\r\n     * linked list.\r\n     */\r\n    protected _poolFirst: Particle;\r\n    /**\r\n     * The original config object that this emitter was initialized with.\r\n     */\r\n    protected _origConfig: any;\r\n    /**\r\n     * The original particle image data that this emitter was initialized with.\r\n     */\r\n    protected _origArt: any;\r\n    /**\r\n     * If the update function is called automatically from the shared ticker.\r\n     * Setting this to false requires calling the update function manually.\r\n     */\r\n    protected _autoUpdate: boolean;\r\n    /**\r\n     * A number keeping index of currently applied image. Used to emit arts in order.\r\n     */\r\n    protected _currentImageIndex = -1;\r\n    /**\r\n     * If the emitter should destroy itself when all particles have died out. This is set by\r\n     * playOnceAndDestroy();\r\n     */\r\n    protected _destroyWhenComplete: boolean;\r\n    /**\r\n     * A callback for when all particles have died out. This is set by\r\n     * playOnceAndDestroy() or playOnce();\r\n     */\r\n    protected _completeCallback: () => void;\r\n\r\n    /**\r\n     * @param particleParent The container to add the particles to.\r\n     * @param particleImages A texture or array of textures to use\r\n     *                       for the particles. Strings will be turned\r\n     *                       into textures via Texture.fromImage().\r\n     * @param config A configuration object containing settings for the emitter.\r\n     * @param config.emit If config.emit is explicitly passed as false, the\r\n     *                    Emitter will start disabled.\r\n     * @param config.autoUpdate If config.autoUpdate is explicitly passed as\r\n     *                          true, the Emitter will automatically call\r\n     *                          update via the PIXI shared ticker.\r\n     */\r\n    constructor(particleParent: Container, particleImages: any, config: EmitterConfig|OldEmitterConfig)\r\n    {\r\n        this._particleConstructor = Particle;\r\n        // properties for individual particles\r\n        this.particleImages = null;\r\n        this.startAlpha = null;\r\n        this.startSpeed = null;\r\n        this.minimumSpeedMultiplier = 1;\r\n        this.acceleration = null;\r\n        this.maxSpeed = NaN;\r\n        this.startScale = null;\r\n        this.minimumScaleMultiplier = 1;\r\n        this.startColor = null;\r\n        this.minLifetime = 0;\r\n        this.maxLifetime = 0;\r\n        this.minStartRotation = 0;\r\n        this.maxStartRotation = 0;\r\n        this.noRotation = false;\r\n        this.minRotationSpeed = 0;\r\n        this.maxRotationSpeed = 0;\r\n        this.particleBlendMode = 0;\r\n        this.customEase = null;\r\n        this.extraData = null;\r\n        // properties for spawning particles\r\n        this._frequency = 1;\r\n        this.spawnChance = 1;\r\n        this.maxParticles = 1000;\r\n        this.emitterLifetime = -1;\r\n        this.spawnPos = null;\r\n        this.spawnType = null;\r\n        this._spawnFunc = null;\r\n        this.spawnRect = null;\r\n        this.spawnCircle = null;\r\n        this.spawnPolygonalChain = null;\r\n        this.particlesPerWave = 1;\r\n        this.particleSpacing = 0;\r\n        this.angleStart = 0;\r\n        // emitter properties\r\n        this.rotation = 0;\r\n        this.ownerPos = null;\r\n        this._prevEmitterPos = null;\r\n        this._prevPosIsValid = false;\r\n        this._posChanged = false;\r\n        this._parent = null;\r\n        this.addAtBack = false;\r\n        this.particleCount = 0;\r\n        this._emit = false;\r\n        this._spawnTimer = 0;\r\n        this._emitterLife = -1;\r\n        this._activeParticlesFirst = null;\r\n        this._activeParticlesLast = null;\r\n        this._poolFirst = null;\r\n        this._origConfig = null;\r\n        this._origArt = null;\r\n        this._autoUpdate = false;\r\n        this._currentImageIndex = -1;\r\n        this._destroyWhenComplete = false;\r\n        this._completeCallback = null;\r\n\r\n        // set the initial parent\r\n        this.parent = particleParent;\r\n\r\n        if (particleImages && config)\r\n        {\r\n            this.init(particleImages, config);\r\n        }\r\n\r\n        // save often used functions on the instance instead of the prototype for better speed\r\n        this.recycle = this.recycle;\r\n        this.update = this.update;\r\n        this.rotate = this.rotate;\r\n        this.updateSpawnPos = this.updateSpawnPos;\r\n        this.updateOwnerPos = this.updateOwnerPos;\r\n    }\r\n\r\n    /**\r\n     * If the emitter is using particle art in order as provided in `particleImages`.\r\n     * Effective only when `particleImages` has multiple art options.\r\n     * This is particularly useful ensuring that each art shows up once, in case you need to emit a body in an order.\r\n     * For example: dragon - [Head, body1, body2, ..., tail]\r\n     */\r\n    public get orderedArt(): boolean { return this._currentImageIndex !== -1; }\r\n    public set orderedArt(value)\r\n    {\r\n        this._currentImageIndex = value ? 0 : -1;\r\n    }\r\n\r\n    /**\r\n     * Time between particle spawns in seconds. If this value is not a number greater than 0,\r\n     * it will be set to 1 (particle per second) to prevent infinite loops.\r\n     */\r\n    public get frequency(): number { return this._frequency; }\r\n    public set frequency(value)\r\n    {\r\n        // do some error checking to prevent infinite loops\r\n        if (typeof value === 'number' && value > 0)\r\n        {\r\n            this._frequency = value;\r\n        }\r\n        else\r\n        {\r\n            this._frequency = 1;\r\n        }\r\n    }\r\n    /**\r\n     * The constructor used to create new particles. The default is\r\n     * the built in Particle class. Setting this will dump any active or\r\n     * pooled particles, if the emitter has already been used.\r\n     */\r\n    public get particleConstructor(): typeof Particle { return this._particleConstructor; }\r\n    public set particleConstructor(value)\r\n    {\r\n        if (value !== this._particleConstructor)\r\n        {\r\n            this._particleConstructor = value;\r\n            // clean up existing particles\r\n            this.cleanup();\r\n            // scrap all the particles\r\n            for (let particle = this._poolFirst; particle; particle = particle.next)\r\n            {\r\n                particle.destroy();\r\n            }\r\n            this._poolFirst = null;\r\n            // re-initialize the emitter so that the new constructor can do anything it needs to\r\n            if (this._origConfig && this._origArt)\r\n            {\r\n                this.init(this._origArt, this._origConfig);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n    * The container to add particles to. Settings this will dump any active particles.\r\n    */\r\n    public get parent(): Container { return this._parent; }\r\n    public set parent(value)\r\n    {\r\n        this.cleanup();\r\n        this._parent = value;\r\n    }\r\n\r\n    /**\r\n     * Sets up the emitter based on the config settings.\r\n     * @param art A texture or array of textures to use for the particles.\r\n     * @param config A configuration object containing settings for the emitter.\r\n     */\r\n    public init(art: any, config: EmitterConfig|OldEmitterConfig): void\r\n    {\r\n        if (!art || !config)\r\n        {\r\n            return;\r\n        }\r\n        // clean up any existing particles\r\n        this.cleanup();\r\n\r\n        // store the original config and particle images, in case we need to re-initialize\r\n        // when the particle constructor is changed\r\n        this._origConfig = config;\r\n        this._origArt = art;\r\n\r\n        // set up the array of data, also ensuring that it is an array\r\n        art = Array.isArray(art) ? art.slice() : [art];\r\n        // run the art through the particle class's parsing function\r\n        const partClass = this._particleConstructor;\r\n\r\n        this.particleImages = partClass.parseArt ? partClass.parseArt(art) : art;\r\n        // /////////////////////////\r\n        // Particle Properties   //\r\n        // /////////////////////////\r\n        // set up the alpha\r\n        if (config.alpha)\r\n        {\r\n            this.startAlpha = PropertyNode.createList(config.alpha);\r\n        }\r\n        else\r\n        {\r\n            this.startAlpha = new PropertyNode(1, 0);\r\n        }\r\n        // set up the speed\r\n        if (config.speed)\r\n        {\r\n            this.startSpeed = PropertyNode.createList(config.speed);\r\n            // eslint-disable-next-line max-len\r\n            this.minimumSpeedMultiplier = ('minimumSpeedMultiplier' in config ? config.minimumSpeedMultiplier : (config.speed as any).minimumSpeedMultiplier) || 1;\r\n        }\r\n        else\r\n        {\r\n            this.minimumSpeedMultiplier = 1;\r\n            this.startSpeed = new PropertyNode(0, 0);\r\n        }\r\n        // set up acceleration\r\n        const acceleration = config.acceleration;\r\n\r\n        if (acceleration && (acceleration.x || acceleration.y))\r\n        {\r\n            // make sure we disable speed interpolation\r\n            this.startSpeed.next = null;\r\n            this.acceleration = new Point(acceleration.x, acceleration.y);\r\n            this.maxSpeed = config.maxSpeed || NaN;\r\n        }\r\n        else\r\n        {\r\n            this.acceleration = new Point();\r\n        }\r\n        // set up the scale\r\n        if (config.scale)\r\n        {\r\n            this.startScale = PropertyNode.createList(config.scale);\r\n            // eslint-disable-next-line max-len\r\n            this.minimumScaleMultiplier = ('minimumScaleMultiplier' in config ? config.minimumScaleMultiplier : (config.scale as any).minimumScaleMultiplier) || 1;\r\n        }\r\n        else\r\n        {\r\n            this.startScale = new PropertyNode(1, 0);\r\n            this.minimumScaleMultiplier = 1;\r\n        }\r\n        // set up the color\r\n        if (config.color)\r\n        {\r\n            this.startColor = PropertyNode.createList(config.color);\r\n        }\r\n        else\r\n        {\r\n            this.startColor = new PropertyNode({ r: 0xFF, g: 0xFF, b: 0xFF }, 0);\r\n        }\r\n        // set up the start rotation\r\n        if (config.startRotation)\r\n        {\r\n            this.minStartRotation = config.startRotation.min;\r\n            this.maxStartRotation = config.startRotation.max;\r\n        }\r\n        else\r\n        {\r\n            this.minStartRotation = this.maxStartRotation = 0;\r\n        }\r\n        if (config.noRotation\r\n    && (this.minStartRotation || this.maxStartRotation))\r\n        {\r\n            this.noRotation = !!config.noRotation;\r\n        }\r\n        else\r\n        {\r\n            this.noRotation = false;\r\n        }\r\n        // set up the rotation speed\r\n        if (config.rotationSpeed)\r\n        {\r\n            this.minRotationSpeed = config.rotationSpeed.min;\r\n            this.maxRotationSpeed = config.rotationSpeed.max;\r\n        }\r\n        else\r\n        {\r\n            this.minRotationSpeed = this.maxRotationSpeed = 0;\r\n        }\r\n\r\n        this.rotationAcceleration = config.rotationAcceleration || 0;\r\n        // set up the lifetime\r\n        this.minLifetime = config.lifetime.min;\r\n        this.maxLifetime = config.lifetime.max;\r\n        // get the blend mode\r\n        this.particleBlendMode = ParticleUtils.getBlendMode(config.blendMode);\r\n        // use the custom ease if provided\r\n        if (config.ease)\r\n        {\r\n            this.customEase = typeof config.ease === 'function'\r\n                ? config.ease : ParticleUtils.generateEase(config.ease);\r\n        }\r\n        else\r\n        {\r\n            this.customEase = null;\r\n        }\r\n        // set up the extra data, running it through the particle class's parseData function.\r\n        if (partClass.parseData)\r\n        {\r\n            this.extraData = partClass.parseData(config.extraData);\r\n        }\r\n        else\r\n        {\r\n            this.extraData = config.extraData || null;\r\n        }\r\n        // ////////////////////////\r\n        // Emitter Properties   //\r\n        // ////////////////////////\r\n        // reset spawn type specific settings\r\n        this.spawnRect = this.spawnCircle = null;\r\n        this.particlesPerWave = 1;\r\n        if (config.particlesPerWave && config.particlesPerWave > 1)\r\n        {\r\n            this.particlesPerWave = config.particlesPerWave;\r\n        }\r\n        this.particleSpacing = 0;\r\n        this.angleStart = 0;\r\n        // determine the spawn function to use\r\n        this.parseSpawnType(config);\r\n        // set the spawning frequency\r\n        this.frequency = config.frequency;\r\n        this.spawnChance = (typeof config.spawnChance === 'number' && config.spawnChance > 0) ? config.spawnChance : 1;\r\n        // set the emitter lifetime\r\n        this.emitterLifetime = config.emitterLifetime || -1;\r\n        // set the max particles\r\n        this.maxParticles = config.maxParticles > 0 ? config.maxParticles : 1000;\r\n        // determine if we should add the particle at the back of the list or not\r\n        this.addAtBack = !!config.addAtBack;\r\n        // reset the emitter position and rotation variables\r\n        this.rotation = 0;\r\n        this.ownerPos = new Point();\r\n        this.spawnPos = new Point(config.pos.x, config.pos.y);\r\n\r\n        this.initAdditional(art, config);\r\n\r\n        this._prevEmitterPos = this.spawnPos.clone();\r\n        // previous emitter position is invalid and should not be used for interpolation\r\n        this._prevPosIsValid = false;\r\n        // start emitting\r\n        this._spawnTimer = 0;\r\n        this.emit = config.emit === undefined ? true : !!config.emit;\r\n        this.autoUpdate = !!config.autoUpdate;\r\n        this.orderedArt = !!config.orderedArt;\r\n    }\r\n\r\n    /**\r\n     * Sets up additional parameters to the emitter from config settings.\r\n     * Using for parsing additional parameters on classes that extend from Emitter\r\n     * @param art A texture or array of textures to use for the particles.\r\n     * @param config A configuration object containing settings for the emitter.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected initAdditional(art: any, config: EmitterConfig|OldEmitterConfig): void\r\n    {\r\n        // override in subclasses\r\n    }\r\n\r\n    /**\r\n     * Parsing emitter spawn type from config settings.\r\n     * Place for override and add new kind of spawn type\r\n     * @param config A configuration object containing settings for the emitter.\r\n     */\r\n    protected parseSpawnType(config: EmitterConfig|OldEmitterConfig): void\r\n    {\r\n        let spawnCircle;\r\n\r\n        switch (config.spawnType)\r\n        {\r\n            case 'rect':\r\n                this.spawnType = 'rect';\r\n                this._spawnFunc = this._spawnRect;\r\n                const spawnRect = config.spawnRect;\r\n\r\n                this.spawnRect = new Rectangle(spawnRect.x, spawnRect.y, spawnRect.w, spawnRect.h);\r\n                break;\r\n            case 'circle':\r\n                this.spawnType = 'circle';\r\n                this._spawnFunc = this._spawnCircle;\r\n                spawnCircle = config.spawnCircle;\r\n                this.spawnCircle = new Circle(spawnCircle.x, spawnCircle.y, spawnCircle.r) as any;\r\n                break;\r\n            case 'ring':\r\n                this.spawnType = 'ring';\r\n                this._spawnFunc = this._spawnRing;\r\n                spawnCircle = config.spawnCircle;\r\n                this.spawnCircle = new Circle(spawnCircle.x, spawnCircle.y, spawnCircle.r) as any;\r\n                this.spawnCircle.minRadius = spawnCircle.minR;\r\n                break;\r\n            case 'burst':\r\n                this.spawnType = 'burst';\r\n                this._spawnFunc = this._spawnBurst;\r\n                this.particleSpacing = config.particleSpacing;\r\n                this.angleStart = config.angleStart ? config.angleStart : 0;\r\n                break;\r\n            case 'point':\r\n                this.spawnType = 'point';\r\n                this._spawnFunc = this._spawnPoint;\r\n                break;\r\n            case 'polygonalChain':\r\n                this.spawnType = 'polygonalChain';\r\n                this._spawnFunc = this._spawnPolygonalChain;\r\n                this.spawnPolygonalChain = new PolygonalChain(config.spawnPolygon);\r\n                break;\r\n            default:\r\n                this.spawnType = 'point';\r\n                this._spawnFunc = this._spawnPoint;\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Recycles an individual particle. For internal use only.\r\n     * @param particle The particle to recycle.\r\n     * @internal\r\n     */\r\n    public recycle(particle: Particle): void\r\n    {\r\n        if (particle.next)\r\n        {\r\n            particle.next.prev = particle.prev;\r\n        }\r\n        if (particle.prev)\r\n        {\r\n            particle.prev.next = particle.next;\r\n        }\r\n        if (particle === this._activeParticlesLast)\r\n        {\r\n            this._activeParticlesLast = particle.prev;\r\n        }\r\n        if (particle === this._activeParticlesFirst)\r\n        {\r\n            this._activeParticlesFirst = particle.next;\r\n        }\r\n        // add to pool\r\n        particle.prev = null;\r\n        particle.next = this._poolFirst;\r\n        this._poolFirst = particle;\r\n        // remove child from display, or make it invisible if it is in a ParticleContainer\r\n        if (particle.parent)\r\n        {\r\n            particle.parent.removeChild(particle);\r\n        }\r\n        // decrease count\r\n        --this.particleCount;\r\n    }\r\n\r\n    /**\r\n     * Sets the rotation of the emitter to a new value.\r\n     * @param newRot The new rotation, in degrees.\r\n     */\r\n    public rotate(newRot: number): void\r\n    {\r\n        if (this.rotation === newRot) return;\r\n        // caclulate the difference in rotation for rotating spawnPos\r\n        const diff = newRot - this.rotation;\r\n\r\n        this.rotation = newRot;\r\n        // rotate spawnPos\r\n        ParticleUtils.rotatePoint(diff, this.spawnPos);\r\n        // mark the position as having changed\r\n        this._posChanged = true;\r\n    }\r\n\r\n    /**\r\n     * Changes the spawn position of the emitter.\r\n     * @param x The new x value of the spawn position for the emitter.\r\n     * @param y The new y value of the spawn position for the emitter.\r\n     */\r\n    public updateSpawnPos(x: number, y: number): void\r\n    {\r\n        this._posChanged = true;\r\n        this.spawnPos.x = x;\r\n        this.spawnPos.y = y;\r\n    }\r\n\r\n    /**\r\n     * Changes the position of the emitter's owner. You should call this if you are adding\r\n     * particles to the world container that your emitter's owner is moving around in.\r\n     * @param x The new x value of the emitter's owner.\r\n     * @param y The new y value of the emitter's owner.\r\n     */\r\n    public updateOwnerPos(x: number, y: number): void\r\n    {\r\n        this._posChanged = true;\r\n        this.ownerPos.x = x;\r\n        this.ownerPos.y = y;\r\n    }\r\n\r\n    /**\r\n     * Prevents emitter position interpolation in the next update.\r\n     * This should be used if you made a major position change of your emitter's owner\r\n     * that was not normal movement.\r\n     */\r\n    public resetPositionTracking(): void\r\n    {\r\n        this._prevPosIsValid = false;\r\n    }\r\n\r\n    /**\r\n     * If particles should be emitted during update() calls. Setting this to false\r\n     * stops new particles from being created, but allows existing ones to die out.\r\n     */\r\n    public get emit(): boolean { return this._emit; }\r\n    public set emit(value)\r\n    {\r\n        this._emit = !!value;\r\n        this._emitterLife = this.emitterLifetime;\r\n    }\r\n\r\n    /**\r\n     * If the update function is called automatically from the shared ticker.\r\n     * Setting this to false requires calling the update function manually.\r\n     */\r\n    public get autoUpdate(): boolean { return this._autoUpdate; }\r\n    public set autoUpdate(value)\r\n    {\r\n        if (this._autoUpdate && !value)\r\n        {\r\n            ticker.remove(this.update, this);\r\n        }\r\n        else if (!this._autoUpdate && value)\r\n        {\r\n            ticker.add(this.update, this);\r\n        }\r\n        this._autoUpdate = !!value;\r\n    }\r\n\r\n    /**\r\n     * Starts emitting particles, sets autoUpdate to true, and sets up the Emitter to destroy itself\r\n     * when particle emission is complete.\r\n     * @param callback Callback for when emission is complete (all particles have died off)\r\n     */\r\n    public playOnceAndDestroy(callback?: () => void): void\r\n    {\r\n        this.autoUpdate = true;\r\n        this.emit = true;\r\n        this._destroyWhenComplete = true;\r\n        this._completeCallback = callback;\r\n    }\r\n\r\n    /**\r\n     * Starts emitting particles and optionally calls a callback when particle emission is complete.\r\n     * @param callback Callback for when emission is complete (all particles have died off)\r\n     */\r\n    public playOnce(callback?: () => void): void\r\n    {\r\n        this.emit = true;\r\n        this._completeCallback = callback;\r\n    }\r\n\r\n    /**\r\n     * Updates all particles spawned by this emitter and emits new ones.\r\n     * @param delta Time elapsed since the previous frame, in __seconds__.\r\n     */\r\n    public update(delta: number): void\r\n    {\r\n        if (this._autoUpdate)\r\n        {\r\n            delta = delta / settings.TARGET_FPMS / 1000;\r\n        }\r\n\r\n        // if we don't have a parent to add particles to, then don't do anything.\r\n        // this also works as a isDestroyed check\r\n        if (!this._parent) return;\r\n        // update existing particles\r\n        let i;\r\n        let particle;\r\n        let next;\r\n\r\n        for (particle = this._activeParticlesFirst; particle; particle = next)\r\n        {\r\n            next = particle.next;\r\n            particle.update(delta);\r\n        }\r\n        let prevX;\r\n        let prevY;\r\n        // if the previous position is valid, store these for later interpolation\r\n\r\n        if (this._prevPosIsValid)\r\n        {\r\n            prevX = this._prevEmitterPos.x;\r\n            prevY = this._prevEmitterPos.y;\r\n        }\r\n        // store current position of the emitter as local variables\r\n        const curX = this.ownerPos.x + this.spawnPos.x;\r\n        const curY = this.ownerPos.y + this.spawnPos.y;\r\n        // spawn new particles\r\n\r\n        if (this._emit)\r\n        {\r\n            // decrease spawn timer\r\n            this._spawnTimer -= delta < 0 ? 0 : delta;\r\n            // while _spawnTimer < 0, we have particles to spawn\r\n            while (this._spawnTimer <= 0)\r\n            {\r\n                // determine if the emitter should stop spawning\r\n                if (this._emitterLife >= 0)\r\n                {\r\n                    this._emitterLife -= this._frequency;\r\n                    if (this._emitterLife <= 0)\r\n                    {\r\n                        this._spawnTimer = 0;\r\n                        this._emitterLife = 0;\r\n                        this.emit = false;\r\n                        break;\r\n                    }\r\n                }\r\n                // determine if we have hit the particle limit\r\n                if (this.particleCount >= this.maxParticles)\r\n                {\r\n                    this._spawnTimer += this._frequency;\r\n                    continue;\r\n                }\r\n                // determine the particle lifetime\r\n                let lifetime;\r\n\r\n                if (this.minLifetime === this.maxLifetime)\r\n                {\r\n                    lifetime = this.minLifetime;\r\n                }\r\n                else\r\n                {\r\n                    lifetime = (Math.random() * (this.maxLifetime - this.minLifetime)) + this.minLifetime;\r\n                }\r\n                // only make the particle if it wouldn't immediately destroy itself\r\n                if (-this._spawnTimer < lifetime)\r\n                {\r\n                    // If the position has changed and this isn't the first spawn,\r\n                    // interpolate the spawn position\r\n                    let emitPosX; let\r\n                        emitPosY;\r\n\r\n                    if (this._prevPosIsValid && this._posChanged)\r\n                    {\r\n                        // 1 - _spawnTimer / delta, but _spawnTimer is negative\r\n                        const lerp = 1 + (this._spawnTimer / delta);\r\n\r\n                        emitPosX = ((curX - prevX) * lerp) + prevX;\r\n                        emitPosY = ((curY - prevY) * lerp) + prevY;\r\n                    }\r\n                    else// otherwise just set to the spawn position\r\n                    {\r\n                        emitPosX = curX;\r\n                        emitPosY = curY;\r\n                    }\r\n                    // create enough particles to fill the wave (non-burst types have a wave of 1)\r\n                    i = 0;\r\n                    for (let len = Math.min(this.particlesPerWave, this.maxParticles - this.particleCount); i < len; ++i)\r\n                    {\r\n                        // see if we actually spawn one\r\n                        if (this.spawnChance < 1 && Math.random() >= this.spawnChance)\r\n                        {\r\n                            continue;\r\n                        }\r\n                        // create particle\r\n                        let p;\r\n\r\n                        if (this._poolFirst)\r\n                        {\r\n                            p = this._poolFirst;\r\n                            this._poolFirst = this._poolFirst.next;\r\n                            p.next = null;\r\n                        }\r\n                        else\r\n                        {\r\n                            p = new this.particleConstructor(this);\r\n                        }\r\n\r\n                        // set a random texture if we have more than one\r\n                        if (this.particleImages.length > 1)\r\n                        {\r\n                            // if using ordered art\r\n                            if (this._currentImageIndex !== -1)\r\n                            {\r\n                                // get current art index, then increment for the next particle\r\n                                p.applyArt(this.particleImages[this._currentImageIndex++]);\r\n                                // loop around if needed\r\n                                if (this._currentImageIndex < 0 || this._currentImageIndex >= this.particleImages.length)\r\n                                {\r\n                                    this._currentImageIndex = 0;\r\n                                }\r\n                            }\r\n                            // otherwise grab a random one\r\n                            else\r\n                            {\r\n                                p.applyArt(this.particleImages[Math.floor(Math.random() * this.particleImages.length)]);\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            // if they are actually the same texture, a standard particle\r\n                            // will quit early from the texture setting in setTexture().\r\n                            p.applyArt(this.particleImages[0]);\r\n                        }\r\n                        // set up the start and end values\r\n                        p.alphaList.reset(this.startAlpha);\r\n                        if (this.minimumSpeedMultiplier !== 1)\r\n                        {\r\n                            // eslint-disable-next-line max-len\r\n                            p.speedMultiplier = (Math.random() * (1 - this.minimumSpeedMultiplier)) + this.minimumSpeedMultiplier;\r\n                        }\r\n                        p.speedList.reset(this.startSpeed);\r\n                        p.acceleration.x = this.acceleration.x;\r\n                        p.acceleration.y = this.acceleration.y;\r\n                        p.maxSpeed = this.maxSpeed;\r\n                        if (this.minimumScaleMultiplier !== 1)\r\n                        {\r\n                            // eslint-disable-next-line max-len\r\n                            p.scaleMultiplier = (Math.random() * (1 - this.minimumScaleMultiplier)) + this.minimumScaleMultiplier;\r\n                        }\r\n                        p.scaleList.reset(this.startScale);\r\n                        p.colorList.reset(this.startColor);\r\n                        // randomize the rotation speed\r\n                        if (this.minRotationSpeed === this.maxRotationSpeed)\r\n                        {\r\n                            p.rotationSpeed = this.minRotationSpeed;\r\n                        }\r\n                        else\r\n                        {\r\n                            // eslint-disable-next-line max-len\r\n                            p.rotationSpeed = (Math.random() * (this.maxRotationSpeed - this.minRotationSpeed)) + this.minRotationSpeed;\r\n                        }\r\n                        p.rotationAcceleration = this.rotationAcceleration;\r\n                        p.noRotation = this.noRotation;\r\n                        // set up the lifetime\r\n                        p.maxLife = lifetime;\r\n                        // set the blend mode\r\n                        p.blendMode = this.particleBlendMode;\r\n                        // set the custom ease, if any\r\n                        p.ease = this.customEase;\r\n                        // set the extra data, if any\r\n                        p.extraData = this.extraData;\r\n                        // set additional properties to particle\r\n                        this.applyAdditionalProperties(p);\r\n                        // call the proper function to handle rotation and position of particle\r\n                        this._spawnFunc(p, emitPosX, emitPosY, i);\r\n                        // initialize particle\r\n                        p.init();\r\n                        // add the particle to the display list\r\n                        if (this.addAtBack)\r\n                        {\r\n                            this._parent.addChildAt(p, 0);\r\n                        }\r\n                        else\r\n                        {\r\n                            this._parent.addChild(p);\r\n                        }\r\n                        // add particle to list of active particles\r\n                        if (this._activeParticlesLast)\r\n                        {\r\n                            this._activeParticlesLast.next = p;\r\n                            p.prev = this._activeParticlesLast;\r\n                            this._activeParticlesLast = p;\r\n                        }\r\n                        else\r\n                        {\r\n                            this._activeParticlesLast = this._activeParticlesFirst = p;\r\n                        }\r\n                        ++this.particleCount;\r\n                        // update the particle by the time passed, so the particles are spread out properly\r\n                        p.update(-this._spawnTimer);// we want a positive delta, because a negative delta messes things up\r\n                    }\r\n                }\r\n                // increase timer and continue on to any other particles that need to be created\r\n                this._spawnTimer += this._frequency;\r\n            }\r\n        }\r\n        // if the position changed before this update, then keep track of that\r\n        if (this._posChanged)\r\n        {\r\n            this._prevEmitterPos.x = curX;\r\n            this._prevEmitterPos.y = curY;\r\n            this._prevPosIsValid = true;\r\n            this._posChanged = false;\r\n        }\r\n\r\n        // if we are all done and should destroy ourselves, take care of that\r\n        if (!this._emit && !this._activeParticlesFirst)\r\n        {\r\n            if (this._completeCallback)\r\n            {\r\n                const cb = this._completeCallback;\r\n\r\n                this._completeCallback = null;\r\n                cb();\r\n            }\r\n            if (this._destroyWhenComplete)\r\n            {\r\n                this.destroy();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set additional properties to new particle.\r\n     * Using on classes that extend from Emitter\r\n     * @param p The particle\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    protected applyAdditionalProperties(p: Particle): void\r\n    {\r\n        // for override in subclass\r\n    }\r\n\r\n    /**\r\n     * Positions a particle for a point type emitter.\r\n     * @param p The particle to position and rotate.\r\n     * @param emitPosX The emitter's x position\r\n     * @param emitPosY The emitter's y position\r\n     * @param i The particle number in the current wave. Not used for this function.\r\n     */\r\n    protected _spawnPoint(p: Particle, emitPosX: number, emitPosY: number): void\r\n    {\r\n        // set the initial rotation/direction of the particle based on\r\n        // starting particle angle and rotation of emitter\r\n        if (this.minStartRotation === this.maxStartRotation)\r\n        {\r\n            p.rotation = this.minStartRotation + this.rotation;\r\n        }\r\n        else\r\n        {\r\n            // eslint-disable-next-line max-len\r\n            p.rotation = (Math.random() * (this.maxStartRotation - this.minStartRotation)) + this.minStartRotation + this.rotation;\r\n        }\r\n        // drop the particle at the emitter's position\r\n        p.position.x = emitPosX;\r\n        p.position.y = emitPosY;\r\n    }\r\n\r\n    /**\r\n     * Positions a particle for a rectangle type emitter.\r\n     * @param p The particle to position and rotate.\r\n     * @param emitPosX The emitter's x position\r\n     * @param emitPosY The emitter's y position\r\n     * @param i The particle number in the current wave. Not used for this function.\r\n     */\r\n    protected _spawnRect(p: Particle, emitPosX: number, emitPosY: number): void\r\n    {\r\n        // set the initial rotation/direction of the particle based on starting\r\n        // particle angle and rotation of emitter\r\n        if (this.minStartRotation === this.maxStartRotation)\r\n        {\r\n            p.rotation = this.minStartRotation + this.rotation;\r\n        }\r\n        else\r\n        {\r\n            // eslint-disable-next-line max-len\r\n            p.rotation = (Math.random() * (this.maxStartRotation - this.minStartRotation)) + this.minStartRotation + this.rotation;\r\n        }\r\n        // place the particle at a random point in the rectangle\r\n        helperPoint.x = (Math.random() * this.spawnRect.width) + this.spawnRect.x;\r\n        helperPoint.y = (Math.random() * this.spawnRect.height) + this.spawnRect.y;\r\n        if (this.rotation !== 0)\r\n        {\r\n            ParticleUtils.rotatePoint(this.rotation, helperPoint);\r\n        }\r\n        p.position.x = emitPosX + helperPoint.x;\r\n        p.position.y = emitPosY + helperPoint.y;\r\n    }\r\n\r\n    /**\r\n     * Positions a particle for a circle type emitter.\r\n     * @param p The particle to position and rotate.\r\n     * @param emitPosX The emitter's x position\r\n     * @param emitPosY The emitter's y position\r\n     * @param i The particle number in the current wave. Not used for this function.\r\n     */\r\n    protected _spawnCircle(p: Particle, emitPosX: number, emitPosY: number): void\r\n    {\r\n        // set the initial rotation/direction of the particle based on starting\r\n        // particle angle and rotation of emitter\r\n        if (this.minStartRotation === this.maxStartRotation)\r\n        {\r\n            p.rotation = this.minStartRotation + this.rotation;\r\n        }\r\n        else\r\n        {\r\n            // eslint-disable-next-line max-len\r\n            p.rotation = (Math.random() * (this.maxStartRotation - this.minStartRotation)) + this.minStartRotation + this.rotation;\r\n        }\r\n        // place the particle at a random radius in the circle\r\n        helperPoint.x = Math.random() * this.spawnCircle.radius;\r\n        helperPoint.y = 0;\r\n        // rotate the point to a random angle in the circle\r\n        ParticleUtils.rotatePoint(Math.random() * 360, helperPoint);\r\n        // offset by the circle's center\r\n        helperPoint.x += this.spawnCircle.x;\r\n        helperPoint.y += this.spawnCircle.y;\r\n        // rotate the point by the emitter's rotation\r\n        if (this.rotation !== 0)\r\n        {\r\n            ParticleUtils.rotatePoint(this.rotation, helperPoint);\r\n        }\r\n        // set the position, offset by the emitter's position\r\n        p.position.x = emitPosX + helperPoint.x;\r\n        p.position.y = emitPosY + helperPoint.y;\r\n    }\r\n\r\n    /**\r\n     * Positions a particle for a ring type emitter.\r\n     * @param p The particle to position and rotate.\r\n     * @param emitPosX The emitter's x position\r\n     * @param emitPosY The emitter's y position\r\n     * @param i The particle number in the current wave. Not used for this function.\r\n     */\r\n    protected _spawnRing(p: Particle, emitPosX: number, emitPosY: number): void\r\n    {\r\n        const spawnCircle = this.spawnCircle;\r\n        // set the initial rotation/direction of the particle based on starting\r\n        // particle angle and rotation of emitter\r\n\r\n        if (this.minStartRotation === this.maxStartRotation)\r\n        {\r\n            p.rotation = this.minStartRotation + this.rotation;\r\n        }\r\n        else\r\n        {\r\n            p.rotation = (Math.random() * (this.maxStartRotation - this.minStartRotation))\r\n    + this.minStartRotation + this.rotation;\r\n        }\r\n        // place the particle at a random radius in the ring\r\n        if (spawnCircle.minRadius !== spawnCircle.radius)\r\n        {\r\n            helperPoint.x = (Math.random() * (spawnCircle.radius - spawnCircle.minRadius))\r\n    + spawnCircle.minRadius;\r\n        }\r\n        else\r\n        {\r\n            helperPoint.x = spawnCircle.radius;\r\n        }\r\n        helperPoint.y = 0;\r\n        // rotate the point to a random angle in the circle\r\n        const angle = Math.random() * 360;\r\n\r\n        p.rotation += angle;\r\n        ParticleUtils.rotatePoint(angle, helperPoint);\r\n        // offset by the circle's center\r\n        helperPoint.x += this.spawnCircle.x;\r\n        helperPoint.y += this.spawnCircle.y;\r\n        // rotate the point by the emitter's rotation\r\n        if (this.rotation !== 0)\r\n        {\r\n            ParticleUtils.rotatePoint(this.rotation, helperPoint);\r\n        }\r\n        // set the position, offset by the emitter's position\r\n        p.position.x = emitPosX + helperPoint.x;\r\n        p.position.y = emitPosY + helperPoint.y;\r\n    }\r\n\r\n    /**\r\n     * Positions a particle for polygonal chain.\r\n     * @param p The particle to position and rotate.\r\n     * @param emitPosX The emitter's x position\r\n     * @param emitPosY The emitter's y position\r\n     * @param i The particle number in the current wave. Not used for this function.\r\n     */\r\n    protected _spawnPolygonalChain(p: Particle, emitPosX: number, emitPosY: number): void\r\n    {\r\n        // set the initial rotation/direction of the particle based on starting\r\n        // particle angle and rotation of emitter\r\n        if (this.minStartRotation === this.maxStartRotation)\r\n        {\r\n            p.rotation = this.minStartRotation + this.rotation;\r\n        }\r\n        else\r\n        {\r\n            p.rotation = (Math.random() * (this.maxStartRotation - this.minStartRotation))\r\n    + this.minStartRotation + this.rotation;\r\n        }\r\n        // get random point on the polygon chain\r\n        this.spawnPolygonalChain.getRandomPoint(helperPoint);\r\n        // rotate the point by the emitter's rotation\r\n        if (this.rotation !== 0)\r\n        {\r\n            ParticleUtils.rotatePoint(this.rotation, helperPoint);\r\n        }\r\n        // set the position, offset by the emitter's position\r\n        p.position.x = emitPosX + helperPoint.x;\r\n        p.position.y = emitPosY + helperPoint.y;\r\n    }\r\n\r\n    /**\r\n     * Positions a particle for a burst type emitter.\r\n     * @param p The particle to position and rotate.\r\n     * @param emitPosX The emitter's x position\r\n     * @param emitPosY The emitter's y position\r\n     * @param i The particle number in the current wave.\r\n     */\r\n    protected _spawnBurst(p: Particle, emitPosX: number, emitPosY: number, i: number): void\r\n    {\r\n        // set the initial rotation/direction of the particle based on spawn\r\n        // angle and rotation of emitter\r\n        if (this.particleSpacing === 0)\r\n        {\r\n            p.rotation = Math.random() * 360;\r\n        }\r\n        else\r\n        {\r\n            p.rotation = this.angleStart + (this.particleSpacing * i) + this.rotation;\r\n        }\r\n        // drop the particle at the emitter's position\r\n        p.position.x = emitPosX;\r\n        p.position.y = emitPosY;\r\n    }\r\n\r\n    /**\r\n     * Kills all active particles immediately.\r\n     */\r\n    public cleanup(): void\r\n    {\r\n        let particle;\r\n        let next;\r\n\r\n        for (particle = this._activeParticlesFirst; particle; particle = next)\r\n        {\r\n            next = particle.next;\r\n            this.recycle(particle);\r\n            if (particle.parent)\r\n            {\r\n                particle.parent.removeChild(particle);\r\n            }\r\n        }\r\n        this._activeParticlesFirst = this._activeParticlesLast = null;\r\n        this.particleCount = 0;\r\n    }\r\n\r\n    /**\r\n     * Destroys the emitter and all of its particles.\r\n     */\r\n    public destroy(): void\r\n    {\r\n        // make sure we aren't still listening to any tickers\r\n        this.autoUpdate = false;\r\n        // puts all active particles in the pool, and removes them from the particle parent\r\n        this.cleanup();\r\n        // wipe the pool clean\r\n        let next;\r\n\r\n        for (let particle = this._poolFirst; particle; particle = next)\r\n        {\r\n            // store next value so we don't lose it in our destroy call\r\n            next = particle.next;\r\n            particle.destroy();\r\n        }\r\n        this._poolFirst = this._parent = this.particleImages = this.spawnPos = this.ownerPos\r\n            = this.startColor = this.startScale = this.startAlpha = this.startSpeed\r\n            = this.customEase = this._completeCallback = null;\r\n    }\r\n}\r\n","import { ParticleUtils } from './ParticleUtils';\r\nimport { Particle } from './Particle';\r\nimport { Emitter } from './Emitter';\r\nimport { Texture } from '@pixi/core';\r\nimport { Point } from '@pixi/math';\r\n\r\n/**\r\n * A helper point for math things.\r\n * @hidden\r\n */\r\nconst helperPoint = new Point();\r\n\r\n/**\r\n * A hand picked list of Math functions (and a couple properties) that are\r\n * allowable. They should be used without the preceding \"Math.\"\r\n * @hidden\r\n */\r\nconst MATH_FUNCS = [\r\n    'pow',\r\n    'sqrt',\r\n    'abs',\r\n    'floor',\r\n    'round',\r\n    'ceil',\r\n    'E',\r\n    'PI',\r\n    'sin',\r\n    'cos',\r\n    'tan',\r\n    'asin',\r\n    'acos',\r\n    'atan',\r\n    'atan2',\r\n    'log',\r\n];\r\n/**\r\n * create an actual regular expression object from the string\r\n * @hidden\r\n */\r\nconst WHITELISTER = new RegExp(\r\n    [\r\n        // Allow the 4 basic operations, parentheses and all numbers/decimals, as well\r\n        // as 'x', for the variable usage.\r\n        '[01234567890\\\\.\\\\*\\\\-\\\\+\\\\/\\\\(\\\\)x ,]',\r\n    ].concat(MATH_FUNCS).join('|'),\r\n    'g',\r\n);\r\n\r\n/**\r\n * Parses a string into a function for path following.\r\n * This involves whitelisting the string for safety, inserting \"Math.\" to math function\r\n * names, and using `new Function()` to generate a function.\r\n * @hidden\r\n * @param pathString The string to parse.\r\n * @return The path function - takes x, outputs y.\r\n */\r\nfunction parsePath(pathString: string): (x: number) => number\r\n{\r\n    const matches = pathString.match(WHITELISTER);\r\n\r\n    for (let i = matches.length - 1; i >= 0; --i)\r\n    {\r\n        if (MATH_FUNCS.indexOf(matches[i]) >= 0)\r\n        { matches[i] = `Math.${matches[i]}`; }\r\n    }\r\n    pathString = matches.join('');\r\n\r\n    // eslint-disable-next-line no-new-func\r\n    return new Function('x', `return ${pathString};`) as (x: number) => number;\r\n}\r\n\r\n/**\r\n * An particle that follows a path defined by an algebraic expression, e.g. \"sin(x)\" or\r\n * \"5x + 3\".\r\n * To use this class, the particle config must have a \"path\" string in the\r\n * \"extraData\" parameter. This string should have \"x\" in it to represent movement (from the\r\n * speed settings of the particle). It may have numbers, parentheses, the four basic\r\n * operations, and the following Math functions or properties (without the preceding \"Math.\"):\r\n * \"pow\", \"sqrt\", \"abs\", \"floor\", \"round\", \"ceil\", \"E\", \"PI\", \"sin\", \"cos\", \"tan\", \"asin\",\r\n * \"acos\", \"atan\", \"atan2\", \"log\".\r\n * The overall movement of the particle and the expression value become x and y positions for\r\n * the particle, respectively. The final position is rotated by the spawn rotation/angle of\r\n * the particle.\r\n *\r\n * Some example paths:\r\n *\r\n * \t\"sin(x/10) * 20\" // A sine wave path.\r\n * \t\"cos(x/100) * 30\" // Particles curve counterclockwise (for medium speed/low lifetime particles)\r\n * \t\"pow(x/10, 2) / 2\" // Particles curve clockwise (remember, +y is down).\r\n */\r\nexport class PathParticle extends Particle\r\n{\r\n    /**\r\n     * The function representing the path the particle should take.\r\n     */\r\n    public path: Function;\r\n    /**\r\n     * The initial rotation in degrees of the particle, because the direction of the path\r\n     * is based on that.\r\n     */\r\n    public initialRotation: number;\r\n    /**\r\n     * The initial position of the particle, as all path movement is added to that.\r\n     */\r\n    public initialPosition: Point;\r\n    /**\r\n     * Total single directional movement, due to speed.\r\n     */\r\n    public movement: number;\r\n\r\n    /**\r\n     * @param {PIXI.particles.Emitter} emitter The emitter that controls this PathParticle.\r\n     */\r\n    constructor(emitter: Emitter)\r\n    {\r\n        super(emitter);\r\n        this.path = null;\r\n        this.initialRotation = 0;\r\n        this.initialPosition = new Point();\r\n        this.movement = 0;\r\n    }\r\n\r\n    /**\r\n     * Initializes the particle for use, based on the properties that have to\r\n     * have been set already on the particle.\r\n     */\r\n    public init(): void\r\n    {\r\n        // get initial rotation before it is converted to radians\r\n        this.initialRotation = this.rotation;\r\n        // standard init\r\n        this.Particle_init();\r\n\r\n        // set the path for the particle\r\n        this.path = this.extraData.path;\r\n        // cancel the normal movement behavior\r\n        this._doNormalMovement = !this.path;\r\n        // reset movement\r\n        this.movement = 0;\r\n        // grab position\r\n        this.initialPosition.x = this.position.x;\r\n        this.initialPosition.y = this.position.y;\r\n    }\r\n\r\n    /**\r\n     * Updates the particle.\r\n     * @param delta Time elapsed since the previous frame, in __seconds__.\r\n     */\r\n    public update(delta: number): number\r\n    {\r\n        const lerp = this.Particle_update(delta);\r\n        // if the particle died during the update, then don't bother\r\n\r\n        if (lerp >= 0 && this.path)\r\n        {\r\n            // increase linear movement based on speed\r\n            if (this._doSpeed)\r\n            {\r\n                const speed = this.speedList.interpolate(lerp) * this.speedMultiplier;\r\n\r\n                this.movement += speed * delta;\r\n            }\r\n            else\r\n            {\r\n                const speed = this.speedList.current.value * this.speedMultiplier;\r\n\r\n                this.movement += speed * delta;\r\n            }\r\n            // set up the helper point for rotation\r\n            helperPoint.x = this.movement;\r\n            helperPoint.y = this.path(this.movement);\r\n            ParticleUtils.rotatePoint(this.initialRotation, helperPoint);\r\n            this.position.x = this.initialPosition.x + helperPoint.x;\r\n            this.position.y = this.initialPosition.y + helperPoint.y;\r\n        }\r\n\r\n        return lerp;\r\n    }\r\n\r\n    /**\r\n     * Destroys the particle, removing references and preventing future use.\r\n     */\r\n    public destroy(): void\r\n    {\r\n        this.Particle_destroy();\r\n        this.path = this.initialPosition = null;\r\n    }\r\n\r\n    /**\r\n     * Checks over the art that was passed to the Emitter's init() function, to do any special\r\n     * modifications to prepare it ahead of time. This just runs Particle.parseArt().\r\n     * @param art The array of art data. For Particle, it should be an array of\r\n     *            Textures. Any strings in the array will be converted to\r\n     *            Textures via Texture.fromImage().\r\n     * @return The art, after any needed modifications.\r\n     */\r\n    public static parseArt(art: (Texture|string)[]): Texture[]\r\n    {\r\n        return Particle.parseArt(art);\r\n    }\r\n\r\n    /**\r\n     * Parses extra emitter data to ensure it is set up for this particle class.\r\n     * PathParticle checks for the existence of path data, and parses the path data for use\r\n     * by particle instances.\r\n     * @param extraData The extra data from the particle config.\r\n     * @return The parsed extra data.\r\n     */\r\n    public static parseData(extraData: {path: string}): any\r\n    {\r\n        const output: any = {};\r\n\r\n        if (extraData && extraData.path)\r\n        {\r\n            try\r\n            {\r\n                output.path = parsePath(extraData.path);\r\n            }\r\n            catch (e)\r\n            {\r\n                if (ParticleUtils.verbose)\r\n                {\r\n                    console.error('PathParticle: error in parsing path expression');\r\n                }\r\n                output.path = null;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (ParticleUtils.verbose)\r\n            {\r\n                console.error('PathParticle requires a path string in extraData!');\r\n            }\r\n            output.path = null;\r\n        }\r\n\r\n        return output;\r\n    }\r\n}\r\n","import { Particle } from './Particle';\r\nimport { Emitter } from './Emitter';\r\nimport { GetTextureFromString } from './ParticleUtils';\r\nimport { Texture } from '@pixi/core';\r\n\r\nexport interface ParsedAnimatedParticleArt\r\n{\r\n    textures: Texture[];\r\n    duration: number;\r\n    framerate: number;\r\n    loop: boolean;\r\n}\r\n\r\nexport interface AnimatedParticleArt\r\n{\r\n    framerate: 'matchLife'|number;\r\n    loop?: boolean;\r\n    textures: (string|Texture|{texture: string|Texture;count: number})[];\r\n}\r\n\r\n/**\r\n * An individual particle image with an animation. Art data passed to the emitter must be\r\n * formatted in a particular way for AnimatedParticle to be able to handle it:\r\n *\r\n * ```typescript\r\n * {\r\n *     //framerate is required. It is the animation speed of the particle in frames per\r\n *     //second.\r\n *     //A value of \"matchLife\" causes the animation to match the lifetime of an individual\r\n *     //particle, instead of at a constant framerate. This causes the animation to play\r\n *     //through one time, completing when the particle expires.\r\n *     framerate: 6,\r\n *     //loop is optional, and defaults to false.\r\n *     loop: true,\r\n *     //textures is required, and can be an array of any (non-zero) length.\r\n *     textures: [\r\n *         //each entry represents a single texture that should be used for one or more\r\n *         //frames. Any strings will be converted to Textures with Texture.from().\r\n *         //Instances of PIXI.Texture will be used directly.\r\n *         \"animFrame1.png\",\r\n *         //entries can be an object with a 'count' property, telling AnimatedParticle to\r\n *         //use that texture for 'count' frames sequentially.\r\n *         {\r\n *             texture: \"animFrame2.png\",\r\n *             count: 3\r\n *         },\r\n *         \"animFrame3.png\"\r\n *     ]\r\n * }\r\n * ```\r\n */\r\nexport class AnimatedParticle extends Particle\r\n{\r\n    /**\r\n     * Texture array used as each frame of animation, similarly to how MovieClip works.\r\n     */\r\n    private textures: Texture[];\r\n\r\n    /**\r\n     * Duration of the animation, in seconds.\r\n     */\r\n    private duration: number;\r\n\r\n    /**\r\n     * Animation framerate, in frames per second.\r\n     */\r\n    private framerate: number;\r\n\r\n    /**\r\n     * Animation time elapsed, in seconds.\r\n     */\r\n    private elapsed: number;\r\n\r\n    /**\r\n     * If this particle animation should loop.\r\n     */\r\n    private loop: boolean;\r\n\r\n    /**\r\n     * @param emitter The emitter that controls this AnimatedParticle.\r\n     */\r\n    constructor(emitter: Emitter)\r\n    {\r\n        super(emitter);\r\n\r\n        this.textures = null;\r\n        this.duration = 0;\r\n        this.framerate = 0;\r\n        this.elapsed = 0;\r\n        this.loop = false;\r\n    }\r\n\r\n    /**\r\n     * Initializes the particle for use, based on the properties that have to\r\n     * have been set already on the particle.\r\n     */\r\n    public init(): void\r\n    {\r\n        this.Particle_init();\r\n\r\n        this.elapsed = 0;\r\n\r\n        // if the animation needs to match the particle's life, then cacluate variables\r\n        if (this.framerate < 0)\r\n        {\r\n            this.duration = this.maxLife;\r\n            this.framerate = this.textures.length / this.duration;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the textures for the particle.\r\n     * @param art An array of PIXI.Texture objects for this animated particle.\r\n     */\r\n    public applyArt(art: ParsedAnimatedParticleArt): void\r\n    {\r\n        this.textures = art.textures;\r\n        this.framerate = art.framerate;\r\n        this.duration = art.duration;\r\n        this.loop = art.loop;\r\n    }\r\n\r\n    /**\r\n     * Updates the particle.\r\n     * @param delta Time elapsed since the previous frame, in __seconds__.\r\n     */\r\n    public update(delta: number): number\r\n    {\r\n        const lerp = this.Particle_update(delta);\r\n\r\n        // only animate the particle if it is still alive\r\n        if (lerp >= 0)\r\n        {\r\n            this.elapsed += delta;\r\n            if (this.elapsed >= this.duration)\r\n            {\r\n                // loop elapsed back around\r\n                if (this.loop)\r\n                {\r\n                    this.elapsed = this.elapsed % this.duration;\r\n                }\r\n                // subtract a small amount to prevent attempting to go past the end of the animation\r\n                else\r\n                {\r\n                    this.elapsed = this.duration - 0.000001;\r\n                }\r\n            }\r\n            // add a very small number to the frame and then floor it to avoid\r\n            // the frame being one short due to floating point errors.\r\n            const frame = ((this.elapsed * this.framerate) + 0.0000001) | 0;\r\n\r\n            // in the very rare case that framerate * elapsed math ends up going past the end, use the last texture\r\n            this.texture = this.textures[frame] || this.textures[this.textures.length - 1] || Texture.EMPTY;\r\n        }\r\n\r\n        return lerp;\r\n    }\r\n\r\n    /**\r\n     * Destroys the particle, removing references and preventing future use.\r\n     */\r\n    public destroy(): void\r\n    {\r\n        this.Particle_destroy();\r\n        this.textures = null;\r\n    }\r\n\r\n    /**\r\n     * Checks over the art that was passed to the Emitter's init() function, to do any special\r\n     * modifications to prepare it ahead of time.\r\n     * @param art The array of art data, properly formatted for AnimatedParticle.\r\n     * @return The art, after any needed modifications.\r\n     */\r\n    public static parseArt(art: AnimatedParticleArt[]): any\r\n    {\r\n        const outArr: ParsedAnimatedParticleArt[] = [];\r\n\r\n        for (let i = 0; i < art.length; ++i)\r\n        {\r\n            const data = art[i];\r\n            const output = outArr[i] = {} as ParsedAnimatedParticleArt;\r\n            const outTextures = output.textures = [] as Texture[];\r\n            const textures = data.textures;\r\n\r\n            for (let j = 0; j < textures.length; ++j)\r\n            {\r\n                let tex = textures[j];\r\n\r\n                if (typeof tex === 'string')\r\n                {\r\n                    outTextures.push(GetTextureFromString(tex));\r\n                }\r\n                else if (tex instanceof Texture)\r\n                {\r\n                    outTextures.push(tex);\r\n                }\r\n                // assume an object with extra data determining duplicate frame data\r\n                else\r\n                {\r\n                    let dupe = tex.count || 1;\r\n\r\n                    if (typeof tex.texture === 'string')\r\n                    {\r\n                        tex = GetTextureFromString(tex.texture);\r\n                    }\r\n                    else// if(tex.texture instanceof Texture)\r\n                    {\r\n                        tex = tex.texture;\r\n                    }\r\n                    for (; dupe > 0; --dupe)\r\n                    {\r\n                        outTextures.push(tex);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // use these values to signify that the animation should match the particle life time.\r\n            if (data.framerate === 'matchLife')\r\n            {\r\n                // -1 means that it should be calculated\r\n                output.framerate = -1;\r\n                output.duration = 0;\r\n                output.loop = false;\r\n            }\r\n            else\r\n            {\r\n                // determine if the animation should loop\r\n                output.loop = !!data.loop;\r\n                // get the framerate, default to 60\r\n                output.framerate = data.framerate > 0 ? data.framerate : 60;\r\n                // determine the duration\r\n                output.duration = outTextures.length / output.framerate;\r\n            }\r\n        }\r\n\r\n        return outArr;\r\n    }\r\n}\r\n","import { Container, DisplayObject } from '@pixi/display';\r\nimport { Renderer, MaskData } from '@pixi/core';\r\nimport { Rectangle } from '@pixi/math';\r\n\r\n/** Interface for a child of a LinkedListContainer (has the prev/next properties added) */\r\nexport interface LinkedListChild extends DisplayObject\r\n{\r\n    nextChild: LinkedListChild|null;\r\n    prevChild: LinkedListChild|null;\r\n}\r\n\r\n/**\r\n * A semi-experimental Container that uses a doubly linked list to manage children instead of an\r\n * array. This means that adding/removing children often is not the same performance hit that\r\n * it would to be continually pushing/splicing.\r\n * However, this is primarily intended to be used for heavy particle usage, and may not handle\r\n * edge cases well if used as a complete Container replacement.\r\n */\r\nexport class LinkedListContainer extends Container\r\n{\r\n    private _firstChild: LinkedListChild|null = null;\r\n    private _lastChild: LinkedListChild|null = null;\r\n    private _childCount = 0;\r\n\r\n    public get firstChild(): LinkedListChild\r\n    {\r\n        return this._firstChild;\r\n    }\r\n\r\n    public get lastChild(): LinkedListChild\r\n    {\r\n        return this._lastChild;\r\n    }\r\n\r\n    public get childCount(): number\r\n    {\r\n        return this._childCount;\r\n    }\r\n\r\n    public addChild<T extends DisplayObject[]>(...children: T): T[0]\r\n    {\r\n        // if there is only one argument we can bypass looping through the them\r\n        if (children.length > 1)\r\n        {\r\n            // loop through the array and add all children\r\n            for (let i = 0; i < children.length; i++)\r\n            {\r\n                // eslint-disable-next-line prefer-rest-params\r\n                this.addChild(children[i]);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const child = children[0] as LinkedListChild;\r\n            // if the child has a parent then lets remove it as PixiJS objects can only exist in one place\r\n\r\n            if (child.parent)\r\n            {\r\n                child.parent.removeChild(child);\r\n            }\r\n\r\n            child.parent = this;\r\n            this.sortDirty = true;\r\n\r\n            // ensure child transform will be recalculated\r\n            child.transform._parentID = -1;\r\n\r\n            // add to list if we have a list\r\n            if (this._lastChild)\r\n            {\r\n                this._lastChild.nextChild = child;\r\n                child.prevChild = this._lastChild;\r\n                this._lastChild = child;\r\n            }\r\n            // otherwise initialize the list\r\n            else\r\n            {\r\n                this._firstChild = this._lastChild = child;\r\n            }\r\n\r\n            // update child count\r\n            ++this._childCount;\r\n\r\n            // ensure bounds will be recalculated\r\n            this._boundsID++;\r\n\r\n            // TODO - lets either do all callbacks or all events.. not both!\r\n            this.onChildrenChange();\r\n            this.emit('childAdded', child, this, this._childCount);\r\n            child.emit('added', this);\r\n        }\r\n\r\n        return children[0];\r\n    }\r\n\r\n    public addChildAt<T extends DisplayObject>(child: T, index: number): T\r\n    {\r\n        if (index < 0 || index > this._childCount)\r\n        {\r\n            throw new Error(`addChildAt: The index ${index} supplied is out of bounds ${this._childCount}`);\r\n        }\r\n\r\n        if (child.parent)\r\n        {\r\n            child.parent.removeChild(child);\r\n        }\r\n\r\n        child.parent = this;\r\n        this.sortDirty = true;\r\n\r\n        // ensure child transform will be recalculated\r\n        child.transform._parentID = -1;\r\n\r\n        const c = (child as any) as LinkedListChild;\r\n\r\n        // if no children, do basic initialization\r\n        if (!this._firstChild)\r\n        {\r\n            this._firstChild = this._lastChild = c;\r\n        }\r\n        // add at beginning (back)\r\n        else if (index === 0)\r\n        {\r\n            this._firstChild.prevChild = c;\r\n            c.nextChild = this._firstChild;\r\n            this._firstChild = c;\r\n        }\r\n        // add at end (front)\r\n        else if (index === this._childCount)\r\n        {\r\n            this._lastChild.nextChild = c;\r\n            c.prevChild = this._lastChild;\r\n            this._lastChild = c;\r\n        }\r\n        // otherwise we have to start counting through the children to find the right one\r\n        // - SLOW, only provided to fully support the possibility of use\r\n        else\r\n        {\r\n            let i = 0;\r\n            let target = this._firstChild;\r\n\r\n            while (i < index)\r\n            {\r\n                target = target.nextChild;\r\n                ++i;\r\n            }\r\n            // insert before the target that we found at the specified index\r\n            target.prevChild.nextChild = c;\r\n            c.prevChild = target.prevChild;\r\n            c.nextChild = target;\r\n            target.prevChild = c;\r\n        }\r\n\r\n        // update child count\r\n        ++this._childCount;\r\n\r\n        // ensure bounds will be recalculated\r\n        this._boundsID++;\r\n\r\n        // TODO - lets either do all callbacks or all events.. not both!\r\n        this.onChildrenChange(index);\r\n        child.emit('added', this);\r\n        this.emit('childAdded', child, this, index);\r\n\r\n        return child;\r\n    }\r\n\r\n    /**\r\n     * Adds a child to the container to be rendered below another child.\r\n     *\r\n     * @param child The child to add\r\n     * @param relative - The current child to add the new child relative to.\r\n     * @return The child that was added.\r\n     */\r\n    public addChildBelow<T extends DisplayObject>(child: T, relative: DisplayObject): T\r\n    {\r\n        if (relative.parent !== this)\r\n        {\r\n            throw new Error(`addChildBelow: The relative target must be a child of this parent`);\r\n        }\r\n\r\n        if (child.parent)\r\n        {\r\n            child.parent.removeChild(child);\r\n        }\r\n\r\n        child.parent = this;\r\n        this.sortDirty = true;\r\n\r\n        // ensure child transform will be recalculated\r\n        child.transform._parentID = -1;\r\n\r\n        // insert before the target that we were given\r\n        (relative as LinkedListChild).prevChild.nextChild = (child as any as LinkedListChild);\r\n        (child as any as LinkedListChild).prevChild = (relative as LinkedListChild).prevChild;\r\n        (child as any as LinkedListChild).nextChild = (relative as LinkedListChild);\r\n        (relative as LinkedListChild).prevChild = (child as any as LinkedListChild);\r\n        if (this._firstChild === relative)\r\n        {\r\n            this._firstChild = (child as any as LinkedListChild);\r\n        }\r\n\r\n        // update child count\r\n        ++this._childCount;\r\n\r\n        // ensure bounds will be recalculated\r\n        this._boundsID++;\r\n\r\n        // TODO - lets either do all callbacks or all events.. not both!\r\n        this.onChildrenChange();\r\n        this.emit('childAdded', child, this, this._childCount);\r\n        child.emit('added', this);\r\n\r\n        return child;\r\n    }\r\n\r\n    /**\r\n     * Adds a child to the container to be rendered above another child.\r\n     *\r\n     * @param child The child to add\r\n     * @param relative - The current child to add the new child relative to.\r\n     * @return The child that was added.\r\n     */\r\n    public addChildAbove<T extends DisplayObject>(child: T, relative: DisplayObject): T\r\n    {\r\n        if (relative.parent !== this)\r\n        {\r\n            throw new Error(`addChildBelow: The relative target must be a child of this parent`);\r\n        }\r\n\r\n        if (child.parent)\r\n        {\r\n            child.parent.removeChild(child);\r\n        }\r\n\r\n        child.parent = this;\r\n        this.sortDirty = true;\r\n\r\n        // ensure child transform will be recalculated\r\n        child.transform._parentID = -1;\r\n\r\n        // insert after the target that we were given\r\n        (relative as LinkedListChild).nextChild.prevChild = (child as any as LinkedListChild);\r\n        (child as any as LinkedListChild).nextChild = (relative as LinkedListChild).nextChild;\r\n        (child as any as LinkedListChild).prevChild = (relative as LinkedListChild);\r\n        (relative as LinkedListChild).nextChild = (child as any as LinkedListChild);\r\n        if (this._lastChild === relative)\r\n        {\r\n            this._lastChild = (child as any as LinkedListChild);\r\n        }\r\n\r\n        // update child count\r\n        ++this._childCount;\r\n\r\n        // ensure bounds will be recalculated\r\n        this._boundsID++;\r\n\r\n        // TODO - lets either do all callbacks or all events.. not both!\r\n        this.onChildrenChange();\r\n        this.emit('childAdded', child, this, this._childCount);\r\n        child.emit('added', this);\r\n\r\n        return child;\r\n    }\r\n\r\n    public swapChildren(child: DisplayObject, child2: DisplayObject): void\r\n    {\r\n        if (child === child2 || child.parent !== this || child2.parent !== this)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const { prevChild, nextChild } = (child as LinkedListChild);\r\n\r\n        (child as LinkedListChild).prevChild = (child2 as LinkedListChild).prevChild;\r\n        (child as LinkedListChild).nextChild = (child2 as LinkedListChild).nextChild;\r\n        (child2 as LinkedListChild).prevChild = prevChild;\r\n        (child2 as LinkedListChild).nextChild = nextChild;\r\n\r\n        if (this._firstChild === child)\r\n        {\r\n            this._firstChild = child2 as LinkedListChild;\r\n        }\r\n        else if (this._firstChild === child2)\r\n        {\r\n            this._firstChild = child as LinkedListChild;\r\n        }\r\n        if (this._lastChild === child)\r\n        {\r\n            this._lastChild = child2 as LinkedListChild;\r\n        }\r\n        else if (this._lastChild === child2)\r\n        {\r\n            this._lastChild = child as LinkedListChild;\r\n        }\r\n\r\n        this.onChildrenChange();\r\n    }\r\n\r\n    public getChildIndex(child: DisplayObject): number\r\n    {\r\n        let index = 0;\r\n        let test = this._firstChild;\r\n\r\n        while (test)\r\n        {\r\n            if (test === child)\r\n            {\r\n                break;\r\n            }\r\n            test = test.nextChild;\r\n            ++index;\r\n        }\r\n        if (!test)\r\n        {\r\n            throw new Error('The supplied DisplayObject must be a child of the caller');\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    setChildIndex(child: DisplayObject, index: number): void\r\n    {\r\n        if (index < 0 || index >= this._childCount)\r\n        {\r\n            throw new Error(`The index ${index} supplied is out of bounds ${this._childCount}`);\r\n        }\r\n        if (child.parent !== this)\r\n        {\r\n            throw new Error('The supplied DisplayObject must be a child of the caller');\r\n        }\r\n\r\n        // remove child\r\n        if ((child as LinkedListChild).nextChild)\r\n        {\r\n            (child as LinkedListChild).nextChild.prevChild = (child as LinkedListChild).prevChild;\r\n        }\r\n        if ((child as LinkedListChild).prevChild)\r\n        {\r\n            (child as LinkedListChild).prevChild.nextChild = (child as LinkedListChild).nextChild;\r\n        }\r\n        if (this._firstChild === (child as LinkedListChild))\r\n        {\r\n            this._firstChild = (child as LinkedListChild).nextChild;\r\n        }\r\n        if (this._lastChild === (child as LinkedListChild))\r\n        {\r\n            this._lastChild = (child as LinkedListChild).prevChild;\r\n        }\r\n        (child as LinkedListChild).nextChild = null;\r\n        (child as LinkedListChild).prevChild = null;\r\n\r\n        // do addChildAt\r\n        if (!this._firstChild)\r\n        {\r\n            this._firstChild = this._lastChild = (child as LinkedListChild);\r\n        }\r\n        else if (index === 0)\r\n        {\r\n            this._firstChild.prevChild = (child as LinkedListChild);\r\n            (child as LinkedListChild).nextChild = this._firstChild;\r\n            this._firstChild = (child as LinkedListChild);\r\n        }\r\n        else if (index === this._childCount)\r\n        {\r\n            this._lastChild.nextChild = (child as LinkedListChild);\r\n            (child as LinkedListChild).prevChild = this._lastChild;\r\n            this._lastChild = (child as LinkedListChild);\r\n        }\r\n        else\r\n        {\r\n            let i = 0;\r\n            let target = this._firstChild;\r\n\r\n            while (i < index)\r\n            {\r\n                target = target.nextChild;\r\n                ++i;\r\n            }\r\n            target.prevChild.nextChild = (child as LinkedListChild);\r\n            (child as LinkedListChild).prevChild = target.prevChild;\r\n            (child as LinkedListChild).nextChild = target;\r\n            target.prevChild = (child as LinkedListChild);\r\n        }\r\n\r\n        this.onChildrenChange(index);\r\n    }\r\n\r\n    public removeChild<T extends DisplayObject[]>(...children: T): T[0]\r\n    {\r\n        // if there is only one argument we can bypass looping through the them\r\n        if (children.length > 1)\r\n        {\r\n            // loop through the arguments property and remove all children\r\n            for (let i = 0; i < children.length; i++)\r\n            {\r\n                this.removeChild(children[i]);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            const child = children[0] as LinkedListChild;\r\n\r\n            // bail if not actually our child\r\n            if (child.parent !== this) return null;\r\n\r\n            child.parent = null;\r\n            // ensure child transform will be recalculated\r\n            child.transform._parentID = -1;\r\n\r\n            // swap out child references\r\n            if (child.nextChild)\r\n            {\r\n                child.nextChild.prevChild = child.prevChild;\r\n            }\r\n            if (child.prevChild)\r\n            {\r\n                child.prevChild.nextChild = child.nextChild;\r\n            }\r\n            if (this._firstChild === child)\r\n            {\r\n                this._firstChild = child.nextChild;\r\n            }\r\n            if (this._lastChild === child)\r\n            {\r\n                this._lastChild = child.prevChild;\r\n            }\r\n            // clear sibling references\r\n            child.nextChild = null;\r\n            child.prevChild = null;\r\n\r\n            // update child count\r\n            --this._childCount;\r\n\r\n            // ensure bounds will be recalculated\r\n            this._boundsID++;\r\n\r\n            // TODO - lets either do all callbacks or all events.. not both!\r\n            this.onChildrenChange();\r\n            child.emit('removed', this);\r\n            this.emit('childRemoved', child, this);\r\n        }\r\n\r\n        return children[0];\r\n    }\r\n\r\n    public getChildAt(index: number): DisplayObject\r\n    {\r\n        if (index < 0 || index >= this._childCount)\r\n        {\r\n            throw new Error(`getChildAt: Index (${index}) does not exist.`);\r\n        }\r\n\r\n        if (index === 0)\r\n        {\r\n            return this._firstChild;\r\n        }\r\n        // add at end (front)\r\n        else if (index === this._childCount)\r\n        {\r\n            return this._lastChild;\r\n        }\r\n        // otherwise we have to start counting through the children to find the right one\r\n        // - SLOW, only provided to fully support the possibility of use\r\n        let i = 0;\r\n        let target = this._firstChild;\r\n\r\n        while (i < index)\r\n        {\r\n            target = target.nextChild;\r\n            ++i;\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public removeChildAt(index: number): DisplayObject\r\n    {\r\n        const child = this.getChildAt(index) as LinkedListChild;\r\n\r\n        // ensure child transform will be recalculated..\r\n        child.parent = null;\r\n        child.transform._parentID = -1;\r\n        // swap out child references\r\n        if (child.nextChild)\r\n        {\r\n            child.nextChild.prevChild = child.prevChild;\r\n        }\r\n        if (child.prevChild)\r\n        {\r\n            child.prevChild.nextChild = child.nextChild;\r\n        }\r\n        if (this._firstChild === child)\r\n        {\r\n            this._firstChild = child.nextChild;\r\n        }\r\n        if (this._lastChild === child)\r\n        {\r\n            this._lastChild = child.prevChild;\r\n        }\r\n        // clear sibling references\r\n        child.nextChild = null;\r\n        child.prevChild = null;\r\n\r\n        // update child count\r\n        --this._childCount;\r\n\r\n        // ensure bounds will be recalculated\r\n        this._boundsID++;\r\n\r\n        // TODO - lets either do all callbacks or all events.. not both!\r\n        this.onChildrenChange(index);\r\n        child.emit('removed', this);\r\n        this.emit('childRemoved', child, this, index);\r\n\r\n        return child;\r\n    }\r\n\r\n    public removeChildren(beginIndex = 0, endIndex = this._childCount): DisplayObject[]\r\n    {\r\n        const begin = beginIndex;\r\n        const end = endIndex;\r\n        const range = end - begin;\r\n\r\n        if (range > 0 && range <= end)\r\n        {\r\n            const removed: LinkedListChild[] = [];\r\n            let child = this._firstChild;\r\n\r\n            for (let i = 0; i <= end && child; ++i, child = child.nextChild)\r\n            {\r\n                if (i >= begin)\r\n                {\r\n                    removed.push(child);\r\n                }\r\n            }\r\n\r\n            // child before removed section\r\n            const prevChild = removed[0].prevChild;\r\n            // child after removed section\r\n            const nextChild = removed[removed.length - 1].nextChild;\r\n\r\n            if (!nextChild)\r\n            {\r\n                // if we removed the last child, then the new last child is the one before\r\n                // the removed section\r\n                this._lastChild = prevChild;\r\n            }\r\n            else\r\n            {\r\n                // otherwise, stitch the child before the section to the child after\r\n                nextChild.prevChild = prevChild;\r\n            }\r\n            if (!prevChild)\r\n            {\r\n                // if we removed the first child, then the new first child is the one after\r\n                // the removed section\r\n                this._firstChild = nextChild;\r\n            }\r\n            else\r\n            {\r\n                // otherwise stich the child after the section to the one before\r\n                prevChild.nextChild = nextChild;\r\n            }\r\n\r\n            for (let i = 0; i < removed.length; ++i)\r\n            {\r\n                // clear parenting and sibling references for all removed children\r\n                removed[i].parent = null;\r\n                if (removed[i].transform)\r\n                {\r\n                    removed[i].transform._parentID = -1;\r\n                }\r\n                removed[i].nextChild = null;\r\n                removed[i].prevChild = null;\r\n            }\r\n\r\n            this._boundsID++;\r\n\r\n            this.onChildrenChange(beginIndex);\r\n\r\n            for (let i = 0; i < removed.length; ++i)\r\n            {\r\n                removed[i].emit('removed', this);\r\n                this.emit('childRemoved', removed[i], this, i);\r\n            }\r\n\r\n            return removed;\r\n        }\r\n        else if (range === 0 && this._childCount === 0)\r\n        {\r\n            return [];\r\n        }\r\n\r\n        throw new RangeError('removeChildren: numeric values are outside the acceptable range.');\r\n    }\r\n\r\n    /**\r\n     * Updates the transform on all children of this container for rendering.\r\n     * Copied from and overrides PixiJS v5 method (v4 method is identical)\r\n     */\r\n    updateTransform(): void\r\n    {\r\n        this._boundsID++;\r\n\r\n        this.transform.updateTransform(this.parent.transform);\r\n\r\n        // TODO: check render flags, how to process stuff here\r\n        this.worldAlpha = this.alpha * this.parent.worldAlpha;\r\n\r\n        let child;\r\n        let next;\r\n\r\n        for (child = this._firstChild; child; child = next)\r\n        {\r\n            next = child.nextChild;\r\n\r\n            if (child.visible)\r\n            {\r\n                child.updateTransform();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Recalculates the bounds of the container.\r\n     * Copied from and overrides PixiJS v5 method (v4 method is identical)\r\n     */\r\n    calculateBounds(): void\r\n    {\r\n        this._bounds.clear();\r\n\r\n        this._calculateBounds();\r\n\r\n        let child;\r\n        let next;\r\n\r\n        for (child = this._firstChild; child; child = next)\r\n        {\r\n            next = child.nextChild;\r\n\r\n            if (!child.visible || !child.renderable)\r\n            {\r\n                continue;\r\n            }\r\n\r\n            child.calculateBounds();\r\n\r\n            // TODO: filter+mask, need to mask both somehow\r\n            if (child._mask)\r\n            {\r\n                const maskObject = ((child._mask as MaskData).maskObject || child._mask) as Container;\r\n\r\n                maskObject.calculateBounds();\r\n                this._bounds.addBoundsMask(child._bounds, maskObject._bounds);\r\n            }\r\n            else if (child.filterArea)\r\n            {\r\n                this._bounds.addBoundsArea(child._bounds, child.filterArea);\r\n            }\r\n            else\r\n            {\r\n                this._bounds.addBounds(child._bounds);\r\n            }\r\n        }\r\n\r\n        this._bounds.updateID = this._boundsID;\r\n    }\r\n\r\n    /**\r\n     * Retrieves the local bounds of the displayObject as a rectangle object. Copied from and overrides PixiJS v5 method\r\n     */\r\n    public getLocalBounds(rect?: Rectangle, skipChildrenUpdate = false): Rectangle\r\n    {\r\n        // skip Container's getLocalBounds, go directly to DisplayObject\r\n        const result = DisplayObject.prototype.getLocalBounds.call(this, rect);\r\n\r\n        if (!skipChildrenUpdate)\r\n        {\r\n            let child;\r\n            let next;\r\n\r\n            for (child = this._firstChild; child; child = next)\r\n            {\r\n                next = child.nextChild;\r\n\r\n                if (child.visible)\r\n                {\r\n                    child.updateTransform();\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Renders the object using the WebGL renderer. Copied from and overrides PixiJS v5 method\r\n     */\r\n    render(renderer: Renderer): void\r\n    {\r\n        // if the object is not visible or the alpha is 0 then no need to render this element\r\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // do a quick check to see if this element has a mask or a filter.\r\n        if (this._mask || (this.filters && this.filters.length))\r\n        {\r\n            this.renderAdvanced(renderer);\r\n        }\r\n        else\r\n        {\r\n            this._render(renderer);\r\n\r\n            let child;\r\n            let next;\r\n\r\n            // simple render children!\r\n            for (child = this._firstChild; child; child = next)\r\n            {\r\n                next = child.nextChild;\r\n                child.render(renderer);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render the object using the WebGL renderer and advanced features. Copied from and overrides PixiJS v5 method\r\n     */\r\n    protected renderAdvanced(renderer: Renderer): void\r\n    {\r\n        renderer.batch.flush();\r\n\r\n        const filters = this.filters;\r\n        const mask = this._mask;\r\n\r\n        // _enabledFilters note: As of development, _enabledFilters is not documented in pixi.js\r\n        // types but is in code of current release (5.2.4).\r\n\r\n        // push filter first as we need to ensure the stencil buffer is correct for any masking\r\n        if (filters)\r\n        {\r\n            if (!this._enabledFilters)\r\n            {\r\n                this._enabledFilters = [];\r\n            }\r\n\r\n            this._enabledFilters.length = 0;\r\n\r\n            for (let i = 0; i < filters.length; i++)\r\n            {\r\n                if (filters[i].enabled)\r\n                {\r\n                    this._enabledFilters.push(filters[i]);\r\n                }\r\n            }\r\n\r\n            if (this._enabledFilters.length)\r\n            {\r\n                renderer.filter.push(this, this._enabledFilters);\r\n            }\r\n        }\r\n\r\n        if (mask)\r\n        {\r\n            renderer.mask.push(this, this._mask);\r\n        }\r\n\r\n        // add this object to the batch, only rendered if it has a texture.\r\n        this._render(renderer);\r\n\r\n        let child;\r\n        let next;\r\n\r\n        // now loop through the children and make sure they get rendered\r\n        for (child = this._firstChild; child; child = next)\r\n        {\r\n            next = child.nextChild;\r\n            child.render(renderer);\r\n        }\r\n\r\n        renderer.batch.flush();\r\n\r\n        if (mask)\r\n        {\r\n            renderer.mask.pop(this);\r\n        }\r\n\r\n        if (filters && this._enabledFilters && this._enabledFilters.length)\r\n        {\r\n            renderer.filter.pop();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Renders the object using the Canvas renderer. Copied from and overrides PixiJS Canvas mixin in V5 and V6.\r\n     */\r\n    renderCanvas(renderer: any): void\r\n    {\r\n        // if not visible or the alpha is 0 then no need to render this\r\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if (this._mask)\r\n        {\r\n            renderer.maskManager.pushMask(this._mask);\r\n        }\r\n\r\n        (this as any)._renderCanvas(renderer);\r\n\r\n        let child;\r\n        let next;\r\n\r\n        for (child = this._firstChild; child; child = next)\r\n        {\r\n            next = child.nextChild;\r\n            (child as any).renderCanvas(renderer);\r\n        }\r\n\r\n        if (this._mask)\r\n        {\r\n            renderer.maskManager.popMask(renderer);\r\n        }\r\n    }\r\n}\r\n"],"names":["helperPoint"],"mappings":"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"}